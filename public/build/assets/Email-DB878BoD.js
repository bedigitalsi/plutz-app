import{r as o,u as p,j as e,H as g}from"./app-DzmAS_oz.js";import{A as _}from"./AuthenticatedLayout-iZAWnfa0.js";import"./transition-Bd1tV77w.js";function N({settings:l}){const[m,u]=o.useState(""),[i,d]=o.useState(!1),{data:s,setData:t,post:x,processing:n,errors:r}=p({mail_from_address:l.mail_from_address,mail_from_name:l.mail_from_name,mail_force_from:l.mail_force_from,mail_force_from_name:l.mail_force_from_name,mail_set_return_path:l.mail_set_return_path,mail_host:l.mail_host,mail_port:l.mail_port,mail_encryption:l.mail_encryption,mail_auto_tls:l.mail_auto_tls,mail_auth_enabled:l.mail_auth_enabled,mail_username:l.mail_username,mail_password:"",mail_admin_recipient:l.mail_admin_recipient}),h=a=>{a.preventDefault(),x(route("settings.email.update"))},b=a=>{a.preventDefault(),m&&(d(!0),window.axios.post(route("settings.email.test"),{test_email:m}).then(()=>{alert("Test email sent successfully!")}).catch(c=>{alert("Failed to send test email: "+(c.response?.data?.message||c.message))}).finally(()=>{d(!1)}))};return e.jsxs(_,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Email Settings"}),children:[e.jsx(g,{title:"Email Settings"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-4xl sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Sender Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Email"}),e.jsx("input",{type:"email",value:s.mail_from_address,onChange:a=>t("mail_from_address",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),r.mail_from_address&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:r.mail_from_address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Name"}),e.jsx("input",{type:"text",value:s.mail_from_name,onChange:a=>t("mail_from_name",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),r.mail_from_name&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:r.mail_from_name})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.mail_force_from,onChange:a=>t("mail_force_from",a.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Force From Email (Recommended Settings: Enable)"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.mail_force_from_name,onChange:a=>t("mail_force_from_name",a.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Force Sender Name"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.mail_set_return_path,onChange:a=>t("mail_set_return_path",a.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Set the return-path to match the From Email"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Recipient Email"}),e.jsx("input",{type:"email",value:s.mail_admin_recipient,onChange:a=>t("mail_admin_recipient",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Email address to receive admin notifications (e.g., signed contracts)"}),r.mail_admin_recipient&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:r.mail_admin_recipient})]})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"SMTP Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Host"}),e.jsx("input",{type:"text",value:s.mail_host,onChange:a=>t("mail_host",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),r.mail_host&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:r.mail_host})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Port"}),e.jsx("input",{type:"number",value:s.mail_port,onChange:a=>t("mail_port",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),r.mail_port&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:r.mail_port}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"SSL usually uses port 465, TLS usually uses 587 or 25"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Encryption"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"none",checked:s.mail_encryption==="none",onChange:a=>t("mail_encryption",a.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"None"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"ssl",checked:s.mail_encryption==="ssl",onChange:a=>t("mail_encryption",a.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"SSL"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"tls",checked:s.mail_encryption==="tls",onChange:a=>t("mail_encryption",a.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"TLS"})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.mail_auto_tls,onChange:a=>t("mail_auto_tls",a.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Use Auto TLS (By default, the TLS encryption would be used if the server supports it. On some servers, it could be a problem and may need to be disabled.)"})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("label",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",checked:s.mail_auth_enabled,onChange:a=>t("mail_auth_enabled",a.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 font-medium",children:"Authentication (If you need to provide your SMTP server's credentials (username and password) enable the authentication, in most cases this is required.)"})]}),s.mail_auth_enabled&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 ml-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Username"}),e.jsx("input",{type:"text",value:s.mail_username,onChange:a=>t("mail_username",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),r.mail_username&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:r.mail_username})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Password"}),e.jsx("input",{type:"password",value:s.mail_password,onChange:a=>t("mail_password",a.target.value),placeholder:l.has_password?"••••••••••":"Enter password",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:l.has_password?"Leave blank to keep existing password":"This input will be securely encrypted using WP SALTS as encryption keys before saving"}),r.mail_password&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:r.mail_password})]})]})]})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Send Test Email"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"email",value:m,onChange:a=>u(a.target.value),placeholder:"Enter email address to send test",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})}),e.jsx("button",{type:"button",onClick:b,disabled:i||!m,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 disabled:opacity-50",children:i?"Sending...":"Send Test"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Send a test email to verify your SMTP settings are working correctly."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:n,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:n?"Saving...":"Save Settings"})})]})})})]})}export{N as default};
