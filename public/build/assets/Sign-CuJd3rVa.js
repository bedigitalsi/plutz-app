import{g as Re,R as Ie,r as N,u as Be,j as d,H as ge,a as Me}from"./app-HlzfsMCi.js";function J(){return J=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},J.apply(null,arguments)}function qe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function We(t,e){if(t==null)return{};var n,r,s=qe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function K(t){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(t)}function Fe(t,e,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}function Ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ee(t,e){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ee(t,e)}function Ze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ee(t,e)}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(t)}function Te(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Te=function(){return!!t})()}function He(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qe(t,e){if(e&&(K(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return He(t)}function Ge(t){var e=Te();return function(){var n,r=W(t);if(e){var s=W(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return Qe(this,n)}}var X={exports:{}},Y,fe;function Xe(){if(fe)return Y;fe=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Y=t,Y}var V,xe;function Ye(){if(xe)return V;xe=1;var t=Xe();function e(){}function n(){}return n.resetWarningCache=e,V=function(){function r(i,o,l,h,c,p){if(p!==t){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},V}var me;function Ve(){return me||(me=1,X.exports=Ye()()),X.exports}var Je=Ve();const S=Re(Je);function E(t,e,n){this.x=t,this.y=e,this.time=n||new Date().getTime()}E.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1};E.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};E.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time};function se(t,e,n,r){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=r}se.prototype.length=function(){for(var t=10,e=0,n=void 0,r=void 0,s=0;s<=t;s+=1){var a=s/t,i=this._point(a,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),o=this._point(a,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(s>0){var l=i-n,h=o-r;e+=Math.sqrt(l*l+h*h)}n=i,r=o}return e};se.prototype._point=function(t,e,n,r,s){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*r*(1-t)*t*t+s*t*t*t};function Ke(t,e,n){var r,s,a,i=null,o=0;n||(n={});var l=function(){o=n.leading===!1?0:Date.now(),i=null,a=t.apply(r,s),i||(r=s=null)};return function(){var h=Date.now();!o&&n.leading===!1&&(o=h);var c=e-(h-o);return r=this,s=arguments,c<=0||c>e?(i&&(clearTimeout(i),i=null),o=h,a=t.apply(r,s),i||(r=s=null)):!i&&n.trailing!==!1&&(i=setTimeout(l,c)),a}}function w(t,e){var n=this,r=e||{};this.velocityFilterWeight=r.velocityFilterWeight||.7,this.minWidth=r.minWidth||.5,this.maxWidth=r.maxWidth||2.5,this.throttle="throttle"in r?r.throttle:16,this.minDistance="minDistance"in r?r.minDistance:5,this.throttle?this._strokeMoveUpdate=Ke(w.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=w.prototype._strokeUpdate,this.dotSize=r.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=r.penColor||"black",this.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",this.onBegin=r.onBegin,this.onEnd=r.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(s){s.which===1&&(n._mouseButtonDown=!0,n._strokeBegin(s))},this._handleMouseMove=function(s){n._mouseButtonDown&&n._strokeMoveUpdate(s)},this._handleMouseUp=function(s){s.which===1&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(s))},this._handleTouchStart=function(s){if(s.targetTouches.length===1){var a=s.changedTouches[0];n._strokeBegin(a)}},this._handleTouchMove=function(s){s.preventDefault();var a=s.targetTouches[0];n._strokeMoveUpdate(a)},this._handleTouchEnd=function(s){var a=s.target===n._canvas;a&&(s.preventDefault(),n._strokeEnd(s))},this.on()}w.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0};w.prototype.fromDataURL=function(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=new Image,s=n.ratio||window.devicePixelRatio||1,a=n.width||this._canvas.width/s,i=n.height||this._canvas.height/s;this._reset(),r.src=t,r.onload=function(){e._ctx.drawImage(r,0,0,a,i)},this._isEmpty=!1};w.prototype.toDataURL=function(t){var e;switch(t){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return(e=this._canvas).toDataURL.apply(e,[t].concat(r))}};w.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};w.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};w.prototype.isEmpty=function(){return this._isEmpty};w.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),typeof this.onBegin=="function"&&this.onBegin(t)};w.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,r=this._createPoint(e,n),s=this._data[this._data.length-1],a=s&&s[s.length-1],i=a&&r.distanceTo(a)<this.minDistance;if(!(a&&i)){var o=this._addPoint(r),l=o.curve,h=o.widths;l&&h&&this._drawCurve(l,h.start,h.end),this._data[this._data.length-1].push({x:r.x,y:r.y,time:r.time,color:this.penColor})}};w.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];if(!e&&n&&this._drawDot(n),n){var r=this._data[this._data.length-1],s=r[r.length-1];n.equals(s)||r.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(t)};w.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};w.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};w.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};w.prototype._createPoint=function(t,e,n){var r=this._canvas.getBoundingClientRect();return new E(t-r.left,e-r.top,n||new Date().getTime())};w.prototype._addPoint=function(t){var e=this.points,n=void 0;if(e.push(t),e.length>2){e.length===3&&e.unshift(e[0]),n=this._calculateCurveControlPoints(e[0],e[1],e[2]);var r=n.c2;n=this._calculateCurveControlPoints(e[1],e[2],e[3]);var s=n.c1,a=new se(e[1],r,s,e[2]),i=this._calculateCurveWidths(a);return e.shift(),{curve:a,widths:i}}return{}};w.prototype._calculateCurveControlPoints=function(t,e,n){var r=t.x-e.x,s=t.y-e.y,a=e.x-n.x,i=e.y-n.y,o={x:(t.x+e.x)/2,y:(t.y+e.y)/2},l={x:(e.x+n.x)/2,y:(e.y+n.y)/2},h=Math.sqrt(r*r+s*s),c=Math.sqrt(a*a+i*i),p=o.x-l.x,u=o.y-l.y,g=c/(h+c),f={x:l.x+p*g,y:l.y+u*g},m=e.x-f.x,x=e.y-f.y;return{c1:new E(o.x+m,o.y+x),c2:new E(l.x+m,l.y+x)}};w.prototype._calculateCurveWidths=function(t){var e=t.startPoint,n=t.endPoint,r={start:null,end:null},s=this.velocityFilterWeight*n.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,a=this._strokeWidth(s);return r.start=this._lastWidth,r.end=a,this._lastVelocity=s,this._lastWidth=a,r};w.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)};w.prototype._drawPoint=function(t,e,n){var r=this._ctx;r.moveTo(t,e),r.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1};w.prototype._drawCurve=function(t,e,n){var r=this._ctx,s=n-e,a=Math.floor(t.length());r.beginPath();for(var i=0;i<a;i+=1){var o=i/a,l=o*o,h=l*o,c=1-o,p=c*c,u=p*c,g=u*t.startPoint.x;g+=3*p*o*t.control1.x,g+=3*c*l*t.control2.x,g+=h*t.endPoint.x;var f=u*t.startPoint.y;f+=3*p*o*t.control1.y,f+=3*c*l*t.control2.y,f+=h*t.endPoint.y;var m=e+h*s;this._drawPoint(g,f,m)}r.closePath(),r.fill()};w.prototype._drawDot=function(t){var e=this._ctx,n=typeof this.dotSize=="function"?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()};w.prototype._fromData=function(t,e,n){for(var r=0;r<t.length;r+=1){var s=t[r];if(s.length>1)for(var a=0;a<s.length;a+=1){var i=s[a],o=new E(i.x,i.y,i.time),l=i.color;if(a===0)this.penColor=l,this._reset(),this._addPoint(o);else if(a!==s.length-1){var h=this._addPoint(o),c=h.curve,p=h.widths;c&&p&&e(c,p,l)}}else{this._reset();var u=s[0];n(u)}}};w.prototype._toSVG=function(){var t=this,e=this._data,n=this._canvas,r=Math.max(window.devicePixelRatio||1,1),s=0,a=0,i=n.width/r,o=n.height/r,l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttributeNS(null,"width",n.width),l.setAttributeNS(null,"height",n.height),this._fromData(e,function(y,_,z){var R=document.createElement("path");if(!isNaN(y.control1.x)&&!isNaN(y.control1.y)&&!isNaN(y.control2.x)&&!isNaN(y.control2.y)){var C="M "+y.startPoint.x.toFixed(3)+","+y.startPoint.y.toFixed(3)+" "+("C "+y.control1.x.toFixed(3)+","+y.control1.y.toFixed(3)+" ")+(y.control2.x.toFixed(3)+","+y.control2.y.toFixed(3)+" ")+(y.endPoint.x.toFixed(3)+","+y.endPoint.y.toFixed(3));R.setAttribute("d",C),R.setAttribute("stroke-width",(_.end*2.25).toFixed(3)),R.setAttribute("stroke",z),R.setAttribute("fill","none"),R.setAttribute("stroke-linecap","round"),l.appendChild(R)}},function(y){var _=document.createElement("circle"),z=typeof t.dotSize=="function"?t.dotSize():t.dotSize;_.setAttribute("r",z),_.setAttribute("cx",y.x),_.setAttribute("cy",y.y),_.setAttribute("fill",y.color),l.appendChild(_)});var h="data:image/svg+xml;base64,",c='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+s+" "+a+" "+i+" "+o+'"')+(' width="'+i+'"')+(' height="'+o+'"')+">",p=l.innerHTML;if(p===void 0){var u=document.createElement("dummy"),g=l.childNodes;u.innerHTML="";for(var f=0;f<g.length;f+=1)u.appendChild(g[f].cloneNode(!0));p=u.innerHTML}var m="</svg>",x=c+p+m;return h+btoa(x)};w.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,function(n,r){return e._drawCurve(n,r.start,r.end)},function(n){return e._drawDot(n)}),this._data=t};w.prototype.toData=function(){return this._data};var q={exports:{}},et=q.exports,ke;function tt(){return ke||(ke=1,(function(t,e){(function(n,r){t.exports=r()})(et,function(){return(function(n){function r(a){if(s[a])return s[a].exports;var i=s[a]={exports:{},id:a,loaded:!1};return n[a].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var s={};return r.m=n,r.c=s,r.p="",r(0)})([function(n,r){function s(h){var c=h.getContext("2d"),p=h.width,u=h.height,g=c.getImageData(0,0,p,u).data,f=o(!0,p,u,g),m=o(!1,p,u,g),x=l(!0,p,u,g),y=l(!1,p,u,g),_=y-x+1,z=m-f+1,R=c.getImageData(x,f,_,z);return h.width=_,h.height=z,c.clearRect(0,0,_,z),c.putImageData(R,0,0),h}function a(h,c,p,u){return{red:u[4*(p*c+h)],green:u[4*(p*c+h)+1],blue:u[4*(p*c+h)+2],alpha:u[4*(p*c+h)+3]}}function i(h,c,p,u){return a(h,c,p,u).alpha}function o(h,c,p,u){for(var g=h?1:-1,f=h?0:p-1,m=f;h?m<p:m>-1;m+=g)for(var x=0;x<c;x++)if(i(x,m,c,u))return m;return null}function l(h,c,p,u){for(var g=h?1:-1,f=h?0:c-1,m=f;h?m<c:m>-1;m+=g)for(var x=0;x<p;x++)if(i(m,x,c,u))return m;return null}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s}])})})(q)),q.exports}var rt=tt();const nt=Re(rt);var st=["canvasProps","clearOnResize"],H=(function(t){Ze(n,t);var e=Ge(n);function n(){var r;Ue(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=e.call.apply(e,[this].concat(a)),r.staticThis=r.constructor,r._sigPad=null,r._canvas=null,r.setRef=function(o){r._canvas=o,r._canvas===null&&(r._sigPad=null)},r._excludeOurProps=function(){var o=r.props;o.canvasProps,o.clearOnResize;var l=We(o,st);return l},r.componentDidMount=function(){var o=r.getCanvas();r._sigPad=new w(o,r._excludeOurProps()),r._resizeCanvas(),r.on()},r.componentWillUnmount=function(){r.off()},r.componentDidUpdate=function(){Object.assign(r._sigPad,r._excludeOurProps())},r.getCanvas=function(){if(r._canvas===null)throw r.staticThis.refNullError;return r._canvas},r.getTrimmedCanvas=function(){var o=r.getCanvas(),l=document.createElement("canvas");return l.width=o.width,l.height=o.height,l.getContext("2d").drawImage(o,0,0),nt(l)},r.getSignaturePad=function(){if(r._sigPad===null)throw r.staticThis.refNullError;return r._sigPad},r._checkClearOnResize=function(){r.props.clearOnResize&&r._resizeCanvas()},r._resizeCanvas=function(){var o,l,h=(o=r.props.canvasProps)!==null&&o!==void 0?o:{},c=h.width,p=h.height;if(!(typeof c<"u"&&typeof p<"u")){var u=r.getCanvas(),g=Math.max((l=window.devicePixelRatio)!==null&&l!==void 0?l:1,1);typeof c>"u"&&(u.width=u.offsetWidth*g),typeof p>"u"&&(u.height=u.offsetHeight*g),u.getContext("2d").scale(g,g),r.clear()}},r.render=function(){var o=r.props.canvasProps;return Ie.createElement("canvas",J({ref:r.setRef},o))},r.on=function(){return window.addEventListener("resize",r._checkClearOnResize),r.getSignaturePad().on()},r.off=function(){return window.removeEventListener("resize",r._checkClearOnResize),r.getSignaturePad().off()},r.clear=function(){return r.getSignaturePad().clear()},r.isEmpty=function(){return r.getSignaturePad().isEmpty()},r.fromDataURL=function(o,l){return r.getSignaturePad().fromDataURL(o,l)},r.toDataURL=function(o,l){return r.getSignaturePad().toDataURL(o,l)},r.fromData=function(o){return r.getSignaturePad().fromData(o)},r.toData=function(){return r.getSignaturePad().toData()},r}return Fe(n)})(N.Component);H.propTypes={velocityFilterWeight:S.number,minWidth:S.number,maxWidth:S.number,minDistance:S.number,dotSize:S.oneOfType([S.number,S.func]),penColor:S.string,throttle:S.number,onEnd:S.func,onBegin:S.func,canvasProps:S.object,clearOnResize:S.bool};H.defaultProps={clearOnResize:!0};H.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");function ie(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var j=ie();function Pe(t){j=t}var I={exec:()=>null};function k(t,e=""){let n=typeof t=="string"?t:t.source,r={replace:(s,a)=>{let i=typeof a=="string"?a:a.source;return i=i.replace(v.caret,"$1"),n=n.replace(s,i),r},getRegex:()=>new RegExp(n,e)};return r}var it=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),v={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},at=/^(?:[ \t]*(?:\n|$))+/,lt=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,ot=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,B=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,ct=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ae=/(?:[*+-]|\d{1,9}[.)])/,ze=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,$e=k(ze).replace(/bull/g,ae).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),ht=k(ze).replace(/bull/g,ae).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),le=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,ut=/^[^\n]+/,oe=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,pt=k(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",oe).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),dt=k(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ae).getRegex(),Q="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ce=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,gt=k("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ce).replace("tag",Q).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ce=k(le).replace("hr",B).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Q).getRegex(),ft=k(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ce).getRegex(),he={blockquote:ft,code:lt,def:pt,fences:ot,heading:ct,hr:B,html:gt,lheading:$e,list:dt,newline:at,paragraph:Ce,table:I,text:ut},be=k("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",B).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Q).getRegex(),xt={...he,lheading:ht,table:be,paragraph:k(le).replace("hr",B).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",be).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Q).getRegex()},mt={...he,html:k(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ce).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:I,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:k(le).replace("hr",B).replace("heading",` *#{1,6} *[^
]`).replace("lheading",$e).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},kt=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,bt=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ee=/^( {2,}|\\)\n(?!\s*$)/,wt=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,G=/[\p{P}\p{S}]/u,ue=/[\s\p{P}\p{S}]/u,Ae=/[^\s\p{P}\p{S}]/u,yt=k(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,ue).getRegex(),je=/(?!~)[\p{P}\p{S}]/u,vt=/(?!~)[\s\p{P}\p{S}]/u,_t=/(?:[^\s\p{P}\p{S}]|~)/u,St=k(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",it?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Ne=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Rt=k(Ne,"u").replace(/punct/g,G).getRegex(),Tt=k(Ne,"u").replace(/punct/g,je).getRegex(),De="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Pt=k(De,"gu").replace(/notPunctSpace/g,Ae).replace(/punctSpace/g,ue).replace(/punct/g,G).getRegex(),zt=k(De,"gu").replace(/notPunctSpace/g,_t).replace(/punctSpace/g,vt).replace(/punct/g,je).getRegex(),$t=k("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Ae).replace(/punctSpace/g,ue).replace(/punct/g,G).getRegex(),Ct=k(/\\(punct)/,"gu").replace(/punct/g,G).getRegex(),Et=k(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),At=k(ce).replace("(?:-->|$)","-->").getRegex(),jt=k("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",At).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),F=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Nt=k(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",F).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Le=k(/^!?\[(label)\]\[(ref)\]/).replace("label",F).replace("ref",oe).getRegex(),Oe=k(/^!?\[(ref)\](?:\[\])?/).replace("ref",oe).getRegex(),Dt=k("reflink|nolink(?!\\()","g").replace("reflink",Le).replace("nolink",Oe).getRegex(),we=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,pe={_backpedal:I,anyPunctuation:Ct,autolink:Et,blockSkip:St,br:Ee,code:bt,del:I,emStrongLDelim:Rt,emStrongRDelimAst:Pt,emStrongRDelimUnd:$t,escape:kt,link:Nt,nolink:Oe,punctuation:yt,reflink:Le,reflinkSearch:Dt,tag:jt,text:wt,url:I},Lt={...pe,link:k(/^!?\[(label)\]\((.*?)\)/).replace("label",F).getRegex(),reflink:k(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",F).getRegex()},te={...pe,emStrongRDelimAst:zt,emStrongLDelim:Tt,url:k(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",we).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:k(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",we).getRegex()},Ot={...te,br:k(Ee).replace("{2,}","*").getRegex(),text:k(te.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},M={normal:he,gfm:xt,pedantic:mt},D={normal:pe,gfm:te,breaks:Ot,pedantic:Lt},It={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ye=t=>It[t];function $(t,e){if(e){if(v.escapeTest.test(t))return t.replace(v.escapeReplace,ye)}else if(v.escapeTestNoEncode.test(t))return t.replace(v.escapeReplaceNoEncode,ye);return t}function ve(t){try{t=encodeURI(t).replace(v.percentDecode,"%")}catch{return null}return t}function _e(t,e){let n=t.replace(v.findPipe,(a,i,o)=>{let l=!1,h=i;for(;--h>=0&&o[h]==="\\";)l=!l;return l?"|":" |"}),r=n.split(v.splitPipe),s=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(v.slashPipe,"|");return r}function L(t,e,n){let r=t.length;if(r===0)return"";let s=0;for(;s<r&&t.charAt(r-s-1)===e;)s++;return t.slice(0,r-s)}function Bt(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function Se(t,e,n,r,s){let a=e.href,i=e.title||null,o=t[1].replace(s.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:a,title:i,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,l}function Mt(t,e,n){let r=t.match(n.other.indentCodeCompensation);if(r===null)return e;let s=r[1];return e.split(`
`).map(a=>{let i=a.match(n.other.beginningSpace);if(i===null)return a;let[o]=i;return o.length>=s.length?a.slice(s.length):a}).join(`
`)}var U=class{options;rules;lexer;constructor(t){this.options=t||j}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:L(n,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let n=e[0],r=Mt(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){let r=L(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:L(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let n=L(e[0],`
`).split(`
`),r="",s="",a=[];for(;n.length>0;){let i=!1,o=[],l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))o.push(n[l]),i=!0;else if(!i)o.push(n[l]);else break;n=n.slice(l);let h=o.join(`
`),c=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${h}`:h,s=s?`${s}
${c}`:c;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,a,!0),this.lexer.state.top=p,n.length===0)break;let u=a.at(-1);if(u?.type==="code")break;if(u?.type==="blockquote"){let g=u,f=g.raw+`
`+n.join(`
`),m=this.blockquote(f);a[a.length-1]=m,r=r.substring(0,r.length-g.raw.length)+m.raw,s=s.substring(0,s.length-g.text.length)+m.text;break}else if(u?.type==="list"){let g=u,f=g.raw+`
`+n.join(`
`),m=this.list(f);a[a.length-1]=m,r=r.substring(0,r.length-u.raw.length)+m.raw,s=s.substring(0,s.length-g.raw.length)+m.raw,n=f.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:a,text:s}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim(),r=n.length>1,s={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let a=this.rules.other.listItemRegex(n),i=!1;for(;t;){let l=!1,h="",c="";if(!(e=a.exec(t))||this.rules.block.hr.test(t))break;h=e[0],t=t.substring(h.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,m=>" ".repeat(3*m.length)),u=t.split(`
`,1)[0],g=!p.trim(),f=0;if(this.options.pedantic?(f=2,c=p.trimStart()):g?f=e[1].length+1:(f=e[2].search(this.rules.other.nonSpaceChar),f=f>4?1:f,c=p.slice(f),f+=e[1].length),g&&this.rules.other.blankLine.test(u)&&(h+=u+`
`,t=t.substring(u.length+1),l=!0),!l){let m=this.rules.other.nextBulletRegex(f),x=this.rules.other.hrRegex(f),y=this.rules.other.fencesBeginRegex(f),_=this.rules.other.headingBeginRegex(f),z=this.rules.other.htmlBeginRegex(f);for(;t;){let R=t.split(`
`,1)[0],C;if(u=R,this.options.pedantic?(u=u.replace(this.rules.other.listReplaceNesting,"  "),C=u):C=u.replace(this.rules.other.tabCharGlobal,"    "),y.test(u)||_.test(u)||z.test(u)||m.test(u)||x.test(u))break;if(C.search(this.rules.other.nonSpaceChar)>=f||!u.trim())c+=`
`+C.slice(f);else{if(g||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||y.test(p)||_.test(p)||x.test(p))break;c+=`
`+u}!g&&!u.trim()&&(g=!0),h+=R+`
`,t=t.substring(R.length+1),p=C.slice(f)}}s.loose||(i?s.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(i=!0)),s.items.push({type:"list_item",raw:h,task:!!this.options.gfm&&this.rules.other.listIsTask.test(c),loose:!1,text:c,tokens:[]}),s.raw+=h}let o=s.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let l of s.items){if(this.lexer.state.top=!1,l.tokens=this.lexer.blockTokens(l.text,[]),l.task){if(l.text=l.text.replace(this.rules.other.listReplaceTask,""),l.tokens[0]?.type==="text"||l.tokens[0]?.type==="paragraph"){l.tokens[0].raw=l.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),l.tokens[0].text=l.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let c=this.lexer.inlineQueue.length-1;c>=0;c--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[c].src)){this.lexer.inlineQueue[c].src=this.lexer.inlineQueue[c].src.replace(this.rules.other.listReplaceTask,"");break}}let h=this.rules.other.listTaskCheckbox.exec(l.raw);if(h){let c={type:"checkbox",raw:h[0]+" ",checked:h[0]!=="[ ]"};l.checked=c.checked,s.loose?l.tokens[0]&&["paragraph","text"].includes(l.tokens[0].type)&&"tokens"in l.tokens[0]&&l.tokens[0].tokens?(l.tokens[0].raw=c.raw+l.tokens[0].raw,l.tokens[0].text=c.raw+l.tokens[0].text,l.tokens[0].tokens.unshift(c)):l.tokens.unshift({type:"paragraph",raw:c.raw,text:c.raw,tokens:[c]}):l.tokens.unshift(c)}}if(!s.loose){let h=l.tokens.filter(p=>p.type==="space"),c=h.length>0&&h.some(p=>this.rules.other.anyLine.test(p.raw));s.loose=c}}if(s.loose)for(let l of s.items){l.loose=!0;for(let h of l.tokens)h.type==="text"&&(h.type="paragraph")}return s}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:s}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let n=_e(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let i of r)this.rules.other.tableAlignRight.test(i)?a.align.push("right"):this.rules.other.tableAlignCenter.test(i)?a.align.push("center"):this.rules.other.tableAlignLeft.test(i)?a.align.push("left"):a.align.push(null);for(let i=0;i<n.length;i++)a.header.push({text:n[i],tokens:this.lexer.inline(n[i]),header:!0,align:a.align[i]});for(let i of s)a.rows.push(_e(i,a.header.length).map((o,l)=>({text:o,tokens:this.lexer.inline(o),header:!1,align:a.align[l]})));return a}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let a=L(n.slice(0,-1),"\\");if((n.length-a.length)%2===0)return}else{let a=Bt(e[2],"()");if(a===-2)return;if(a>-1){let i=(e[0].indexOf("!")===0?5:4)+e[1].length+a;e[2]=e[2].substring(0,a),e[0]=e[0].substring(0,i).trim(),e[3]=""}}let r=e[2],s="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(r);a&&(r=a[1],s=a[3])}else s=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),Se(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=e[r.toLowerCase()];if(!s){let a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return Se(n,s,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let s=[...r[0]].length-1,a,i,o=s,l=0,h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,e=e.slice(-1*t.length+s);(r=h.exec(e))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(i=[...a].length,r[3]||r[4]){o+=i;continue}else if((r[5]||r[6])&&s%3&&!((s+i)%3)){l+=i;continue}if(o-=i,o>0)continue;i=Math.min(i,i+o+l);let c=[...r[0]][0].length,p=t.slice(0,s+r.index+c+i);if(Math.min(s,i)%2){let g=p.slice(1,-1);return{type:"em",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}let u=p.slice(2,-2);return{type:"strong",raw:p,text:u,tokens:this.lexer.inlineTokens(u)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(n),s=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&s&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=e[1],r="mailto:"+n):(n=e[1],r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let n,r;if(e[2]==="@")n=e[0],r="mailto:"+n;else{let s;do s=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(s!==e[0]);n=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},T=class re{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||j,this.options.tokenizer=this.options.tokenizer||new U,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:v,block:M.normal,inline:D.normal};this.options.pedantic?(n.block=M.pedantic,n.inline=D.pedantic):this.options.gfm&&(n.block=M.gfm,this.options.breaks?n.inline=D.breaks:n.inline=D.gfm),this.tokenizer.rules=n}static get rules(){return{block:M,inline:D}}static lex(e,n){return new re(n).lex(e)}static lexInline(e,n){return new re(n).inlineTokens(e)}lex(e){e=e.replace(v.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){for(this.options.pedantic&&(e=e.replace(v.tabCharGlobal,"    ").replace(v.spaceLine,""));e;){let s;if(this.options.extensions?.block?.some(i=>(s=i.call({lexer:this},e,n))?(e=e.substring(s.raw.length),n.push(s),!0):!1))continue;if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length);let i=n.at(-1);s.raw.length===1&&i!==void 0?i.raw+=`
`:n.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length);let i=n.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+s.raw,i.text+=`
`+s.text,this.inlineQueue.at(-1).src=i.text):n.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length);let i=n.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+s.raw,i.text+=`
`+s.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title},n.push(s));continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),n.push(s);continue}let a=e;if(this.options.extensions?.startBlock){let i=1/0,o=e.slice(1),l;this.options.extensions.startBlock.forEach(h=>{l=h.call({lexer:this},o),typeof l=="number"&&l>=0&&(i=Math.min(i,l))}),i<1/0&&i>=0&&(a=e.substring(0,i+1))}if(this.state.top&&(s=this.tokenizer.paragraph(a))){let i=n.at(-1);r&&i?.type==="paragraph"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):n.push(s),r=a.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length);let i=n.at(-1);i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):n.push(s);continue}if(e){let i="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r=e,s=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)l.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let a;for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)a=s[2]?s[2].length:0,r=r.slice(0,s.index+a)+"["+"a".repeat(s[0].length-a-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let i=!1,o="";for(;e;){i||(o=""),i=!1;let l;if(this.options.extensions?.inline?.some(c=>(l=c.call({lexer:this},e,n))?(e=e.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);let c=n.at(-1);l.type==="text"&&c?.type==="text"?(c.raw+=l.raw,c.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(e,r,o)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),n.push(l);continue}let h=e;if(this.options.extensions?.startInline){let c=1/0,p=e.slice(1),u;this.options.extensions.startInline.forEach(g=>{u=g.call({lexer:this},p),typeof u=="number"&&u>=0&&(c=Math.min(c,u))}),c<1/0&&c>=0&&(h=e.substring(0,c+1))}if(l=this.tokenizer.inlineText(h)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(o=l.raw.slice(-1)),i=!0;let c=n.at(-1);c?.type==="text"?(c.raw+=l.raw,c.text+=l.text):n.push(l);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return n}},Z=class{options;parser;constructor(t){this.options=t||j}space(t){return""}code({text:t,lang:e,escaped:n}){let r=(e||"").match(v.notSpaceStart)?.[0],s=t.replace(v.endingNewline,"")+`
`;return r?'<pre><code class="language-'+$(r)+'">'+(n?s:$(s,!0))+`</code></pre>
`:"<pre><code>"+(n?s:$(s,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,n=t.start,r="";for(let i=0;i<t.items.length;i++){let o=t.items[i];r+=this.listitem(o)}let s=e?"ol":"ul",a=e&&n!==1?' start="'+n+'"':"";return"<"+s+a+`>
`+r+"</"+s+`>
`}listitem(t){return`<li>${this.parser.parse(t.tokens)}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let s=0;s<t.header.length;s++)n+=this.tablecell(t.header[s]);e+=this.tablerow({text:n});let r="";for(let s=0;s<t.rows.length;s++){let a=t.rows[s];n="";for(let i=0;i<a.length;i++)n+=this.tablecell(a[i]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${$(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){let r=this.parser.parseInline(n),s=ve(t);if(s===null)return r;t=s;let a='<a href="'+t+'"';return e&&(a+=' title="'+$(e)+'"'),a+=">"+r+"</a>",a}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let s=ve(t);if(s===null)return $(n);t=s;let a=`<img src="${t}" alt="${n}"`;return e&&(a+=` title="${$(e)}"`),a+=">",a}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:$(t.text)}},de=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}checkbox({raw:t}){return t}},P=class ne{options;renderer;textRenderer;constructor(e){this.options=e||j,this.options.renderer=this.options.renderer||new Z,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new de}static parse(e,n){return new ne(n).parse(e)}static parseInline(e,n){return new ne(n).parseInline(e)}parse(e){let n="";for(let r=0;r<e.length;r++){let s=e[r];if(this.options.extensions?.renderers?.[s.type]){let i=s,o=this.options.extensions.renderers[i.type].call({parser:this},i);if(o!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(i.type)){n+=o||"";continue}}let a=s;switch(a.type){case"space":{n+=this.renderer.space(a);break}case"hr":{n+=this.renderer.hr(a);break}case"heading":{n+=this.renderer.heading(a);break}case"code":{n+=this.renderer.code(a);break}case"table":{n+=this.renderer.table(a);break}case"blockquote":{n+=this.renderer.blockquote(a);break}case"list":{n+=this.renderer.list(a);break}case"checkbox":{n+=this.renderer.checkbox(a);break}case"html":{n+=this.renderer.html(a);break}case"def":{n+=this.renderer.def(a);break}case"paragraph":{n+=this.renderer.paragraph(a);break}case"text":{n+=this.renderer.text(a);break}default:{let i='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}parseInline(e,n=this.renderer){let r="";for(let s=0;s<e.length;s++){let a=e[s];if(this.options.extensions?.renderers?.[a.type]){let o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=o||"";continue}}let i=a;switch(i.type){case"escape":{r+=n.text(i);break}case"html":{r+=n.html(i);break}case"link":{r+=n.link(i);break}case"image":{r+=n.image(i);break}case"checkbox":{r+=n.checkbox(i);break}case"strong":{r+=n.strong(i);break}case"em":{r+=n.em(i);break}case"codespan":{r+=n.codespan(i);break}case"br":{r+=n.br(i);break}case"del":{r+=n.del(i);break}case"text":{r+=n.text(i);break}default:{let o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}},O=class{options;block;constructor(t){this.options=t||j}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?T.lex:T.lexInline}provideParser(){return this.block?P.parse:P.parseInline}},qt=class{defaults=ie();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=P;Renderer=Z;TextRenderer=de;Lexer=T;Tokenizer=U;Hooks=O;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(let r of t)switch(n=n.concat(e.call(this,r)),r.type){case"table":{let s=r;for(let a of s.header)n=n.concat(this.walkTokens(a.tokens,e));for(let a of s.rows)for(let i of a)n=n.concat(this.walkTokens(i.tokens,e));break}case"list":{let s=r;n=n.concat(this.walkTokens(s.items,e));break}default:{let s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(a=>{let i=s[a].flat(1/0);n=n.concat(this.walkTokens(i,e))}):s.tokens&&(n=n.concat(this.walkTokens(s.tokens,e)))}}return n}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let a=e.renderers[s.name];a?e.renderers[s.name]=function(...i){let o=s.renderer.apply(this,i);return o===!1&&(o=a.apply(this,i)),o}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=e[s.level];a?a.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),r.extensions=e),n.renderer){let s=this.defaults.renderer||new Z(this.defaults);for(let a in n.renderer){if(!(a in s))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let i=a,o=n.renderer[i],l=s[i];s[i]=(...h)=>{let c=o.apply(s,h);return c===!1&&(c=l.apply(s,h)),c||""}}r.renderer=s}if(n.tokenizer){let s=this.defaults.tokenizer||new U(this.defaults);for(let a in n.tokenizer){if(!(a in s))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let i=a,o=n.tokenizer[i],l=s[i];s[i]=(...h)=>{let c=o.apply(s,h);return c===!1&&(c=l.apply(s,h)),c}}r.tokenizer=s}if(n.hooks){let s=this.defaults.hooks||new O;for(let a in n.hooks){if(!(a in s))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;let i=a,o=n.hooks[i],l=s[i];O.passThroughHooks.has(a)?s[i]=h=>{if(this.defaults.async&&O.passThroughHooksRespectAsync.has(a))return(async()=>{let p=await o.call(s,h);return l.call(s,p)})();let c=o.call(s,h);return l.call(s,c)}:s[i]=(...h)=>{if(this.defaults.async)return(async()=>{let p=await o.apply(s,h);return p===!1&&(p=await l.apply(s,h)),p})();let c=o.apply(s,h);return c===!1&&(c=l.apply(s,h)),c}}r.hooks=s}if(n.walkTokens){let s=this.defaults.walkTokens,a=n.walkTokens;r.walkTokens=function(i){let o=[];return o.push(a.call(this,i)),s&&(o=o.concat(s.call(this,i))),o}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return T.lex(t,e??this.defaults)}parser(t,e){return P.parse(t,e??this.defaults)}parseMarkdown(t){return(e,n)=>{let r={...n},s={...this.defaults,...r},a=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&r.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=t),s.async)return(async()=>{let i=s.hooks?await s.hooks.preprocess(e):e,o=await(s.hooks?await s.hooks.provideLexer():t?T.lex:T.lexInline)(i,s),l=s.hooks?await s.hooks.processAllTokens(o):o;s.walkTokens&&await Promise.all(this.walkTokens(l,s.walkTokens));let h=await(s.hooks?await s.hooks.provideParser():t?P.parse:P.parseInline)(l,s);return s.hooks?await s.hooks.postprocess(h):h})().catch(a);try{s.hooks&&(e=s.hooks.preprocess(e));let i=(s.hooks?s.hooks.provideLexer():t?T.lex:T.lexInline)(e,s);s.hooks&&(i=s.hooks.processAllTokens(i)),s.walkTokens&&this.walkTokens(i,s.walkTokens);let o=(s.hooks?s.hooks.provideParser():t?P.parse:P.parseInline)(i,s);return s.hooks&&(o=s.hooks.postprocess(o)),o}catch(i){return a(i)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let r="<p>An error occurred:</p><pre>"+$(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}},A=new qt;function b(t,e){return A.parse(t,e)}b.options=b.setOptions=function(t){return A.setOptions(t),b.defaults=A.defaults,Pe(b.defaults),b};b.getDefaults=ie;b.defaults=j;b.use=function(...t){return A.use(...t),b.defaults=A.defaults,Pe(b.defaults),b};b.walkTokens=function(t,e){return A.walkTokens(t,e)};b.parseInline=A.parseInline;b.Parser=P;b.parser=P.parse;b.Renderer=Z;b.TextRenderer=de;b.Lexer=T;b.lexer=T.lex;b.Tokenizer=U;b.Hooks=O;b.parse=b;b.options;b.setOptions;b.use;b.walkTokens;b.parseInline;P.parse;T.lex;function Ft({contract:t,markdown:e,token:n}){const r=N.useRef(null),[s,a]=N.useState(""),[i,o]=N.useState(!1),[l,h]=N.useState(!1),{data:c,setData:p,errors:u}=Be({signer_name:t.client_name||"",signer_email:t.client_email||"",signer_company:t.client_company||"",signer_address:t.client_address||"",signature_data:"",consented:!1}),g=N.useMemo(()=>{let x=e||"";return x=x.replace(new RegExp(t.client_name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),c.signer_name||t.client_name),x=x.replace(new RegExp(t.client_email.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),c.signer_email||t.client_email),t.client_company&&(x=x.replace(new RegExp(t.client_company.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),c.signer_company||t.client_company)),t.client_address&&(x=x.replace(new RegExp(t.client_address.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),c.signer_address||t.client_address)),b(x)},[e,c.signer_name,c.signer_email,c.signer_company,c.signer_address,t]),f=()=>{r.current?.clear(),a("")},m=x=>{if(x.preventDefault(),r.current?.isEmpty()){a("Please provide your signature");return}const y=r.current?.toDataURL();h(!0),Me.post(route("contracts.sign.submit",n),{signer_name:c.signer_name,signer_email:c.signer_email,signer_company:c.signer_company,signer_address:c.signer_address,signature_data:y||"",consented:c.consented},{onSuccess:()=>{o(!0)},onFinish:()=>{h(!1)}})};return i?d.jsxs("div",{className:"min-h-screen bg-plutz-dark flex items-center justify-center p-4",children:[d.jsx(ge,{title:"Contract Signed"}),d.jsxs("div",{className:"max-w-md w-full bg-plutz-surface shadow-lg rounded-lg p-8 text-center",children:[d.jsx("div",{className:"mb-4",children:d.jsx("svg",{className:"mx-auto h-16 w-16 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),d.jsx("h1",{className:"text-2xl font-bold text-plutz-cream mb-2",children:"Contract Signed Successfully!"}),d.jsx("p",{className:"text-stone-400 mb-6",children:"Thank you for signing the contract. You will receive a copy via email shortly."}),d.jsx("p",{className:"text-sm text-stone-500",children:"You can now close this window."})]})]}):d.jsxs("div",{className:"min-h-screen bg-plutz-dark py-12 px-4 sm:px-6 lg:px-8",children:[d.jsx(ge,{title:"Sign Contract"}),d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsxs("div",{className:"bg-plutz-surface shadow-sm rounded-lg p-6 mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-plutz-cream mb-2",children:"Contract Signing"}),d.jsx("p",{className:"text-stone-400",children:"Please review the contract below and provide your signature to proceed."})]}),d.jsxs("div",{className:"bg-plutz-surface shadow-lg rounded-lg overflow-hidden mb-6",children:[d.jsx("div",{className:"bg-plutz-tan/20 border-b border-plutz-tan/10 px-8 py-4",children:d.jsx("h2",{className:"text-xl font-bold text-plutz-cream",children:"Contract Document"})}),d.jsx("div",{className:"px-12 py-10 bg-plutz-surface",style:{minHeight:"800px"},children:d.jsx("div",{className:"contract-content",style:{fontFamily:"Georgia, serif",fontSize:"15px",lineHeight:"1.8",color:"#1a1a1a"},dangerouslySetInnerHTML:{__html:g}})})]}),d.jsxs("div",{className:"bg-plutz-surface shadow-sm rounded-lg p-8",children:[d.jsx("h2",{className:"text-xl font-semibold text-plutz-cream mb-6",children:"Your Information"}),d.jsxs("form",{onSubmit:m,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:"Full Name *"}),d.jsx("input",{type:"text",value:c.signer_name,onChange:x=>p("signer_name",x.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan",required:!0}),u.signer_name&&d.jsx("div",{className:"text-red-400 text-sm mt-1",children:u.signer_name})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:"Email Address *"}),d.jsx("input",{type:"email",value:c.signer_email,onChange:x=>p("signer_email",x.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan",required:!0}),u.signer_email&&d.jsx("div",{className:"text-red-400 text-sm mt-1",children:u.signer_email})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:"Company (Optional)"}),d.jsx("input",{type:"text",value:c.signer_company,onChange:x=>p("signer_company",x.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:"Address (Optional)"}),d.jsx("textarea",{value:c.signer_address,onChange:x=>p("signer_address",x.target.value),rows:3,className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:"Signature *"}),d.jsx("div",{className:"border-2 border-plutz-tan/20 rounded-md bg-plutz-surface",children:d.jsx(H,{ref:r,canvasProps:{className:"w-full h-48 cursor-crosshair"},onEnd:()=>a("")})}),s&&d.jsx("div",{className:"text-red-400 text-sm mt-1",children:s}),u.signature_data&&d.jsx("div",{className:"text-red-400 text-sm mt-1",children:u.signature_data}),d.jsx("button",{type:"button",onClick:f,className:"mt-2 text-sm text-stone-400 hover:text-plutz-cream",children:"Clear Signature"})]}),d.jsxs("div",{className:"flex items-start",children:[d.jsx("input",{type:"checkbox",checked:c.consented,onChange:x=>p("consented",x.target.checked),className:"mt-1 h-4 w-4 text-plutz-tan focus:ring-plutz-tan border-plutz-tan/20 rounded",required:!0}),d.jsx("label",{className:"ml-2 block text-sm text-stone-400",children:"I have read and agree to the terms of this contract. I understand that by signing this document electronically, I am providing my legal signature with the same effect as if I had signed a paper document. *"})]}),u.consented&&d.jsx("div",{className:"text-red-400 text-sm",children:u.consented}),d.jsx("div",{className:"pt-4",children:d.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-plutz-tan hover:bg-plutz-tan/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-plutz-tan disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Signing Contract...":"Sign Contract"})})]})]}),d.jsx("div",{className:"mt-6 text-center text-sm text-stone-500",children:d.jsx("p",{children:"This is a legally binding electronic signature. A copy will be sent to your email address."})})]})]})}export{Ft as default};
