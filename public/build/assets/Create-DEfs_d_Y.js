import{u as N,r as d,j as e,H as z,L as f}from"./app-DiVRFiG4.js";import{A as k}from"./AuthenticatedLayout-Cg-z_tlU.js";import{T as C,I as i}from"./TextInput-CjUzidxG.js";import{I as p}from"./InputLabel-ByuAAfJU.js";import{P as L}from"./PrimaryButton-BLBJP1Cj.js";import{M as S}from"./MoneyInput-CrdAZFR5.js";import{u as I}from"./useTranslation-DwCvqw2x.js";import"./transition-DPhprZ3w.js";function P({costTypes:x}){const{t:s}=I(),{data:r,setData:o,post:g,processing:j,errors:n}=N({cost_date:new Date().toISOString().split("T")[0],cost_type_id:"",new_cost_type:"",amount:"",currency:"EUR",is_paid:!0,notes:""}),[a,h]=d.useState(""),[b,c]=d.useState(!1),u=d.useRef(null),_=x.filter(t=>t.name.toLowerCase().includes(a.toLowerCase())),m=x.find(t=>t.name.toLowerCase()===a.toLowerCase()),w=t=>{o(l=>({...l,cost_type_id:String(t.id),new_cost_type:""})),h(t.name),c(!1)},v=t=>{h(t),c(!0),m||o(l=>({...l,cost_type_id:"",new_cost_type:t}))};d.useEffect(()=>{const t=l=>{u.current&&!u.current.contains(l.target)&&c(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const y=t=>{t.preventDefault(),g(route("group-costs.store"))};return e.jsxs(k,{className:"bg-plutz-dark",children:[e.jsx(z,{title:s("group_costs.new_group_cost")}),e.jsx("div",{className:"max-w-[1200px] mx-auto w-full p-6 pb-0",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-2xl font-serif text-plutz-cream",children:s("group_costs.new_group_cost")}),e.jsx(f,{href:route("group-costs.index"),className:"text-plutz-tan hover:text-plutz-tan-light text-sm font-medium",children:s("group_costs.back_to_list")})]})}),e.jsx("div",{className:"max-w-[1200px] mx-auto w-full p-6",children:e.jsx("div",{className:"overflow-hidden bg-plutz-surface shadow-sm sm:rounded-lg",children:e.jsxs("form",{onSubmit:y,className:"space-y-6 p-6",children:[e.jsxs("div",{className:"border-b border-plutz-tan/10 pb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-plutz-cream",children:s("group_costs.cost_details")}),e.jsx("p",{className:"mt-1 text-sm text-stone-400",children:s("group_costs.track_expenses")}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"cost_date",value:s("group_costs.cost_date")}),e.jsx(C,{id:"cost_date",type:"date",className:"mt-1 block w-full",value:r.cost_date,onChange:t=>o("cost_date",t.target.value)}),e.jsx(i,{message:n.cost_date,className:"mt-2"})]}),e.jsxs("div",{ref:u,className:"relative",children:[e.jsx(p,{htmlFor:"cost_type",value:s("group_costs.cost_type_field")}),e.jsx("input",{id:"cost_type",type:"text",className:"mt-1 block w-full rounded-md border-plutz-tan/20 bg-plutz-dark text-plutz-cream shadow-sm focus:border-plutz-tan focus:ring-plutz-tan",value:a,onChange:t=>v(t.target.value),onFocus:()=>c(!0),placeholder:s("group_costs.select_type"),autoComplete:"off"}),b&&(_.length>0||a&&!m)&&e.jsxs("div",{className:"absolute z-50 mt-1 w-full rounded-md bg-plutz-surface border border-[#2d2a28] shadow-xl max-h-48 overflow-y-auto",children:[_.map(t=>e.jsx("button",{type:"button",onClick:()=>w(t),className:"w-full text-left px-3 py-2 text-sm text-plutz-cream hover:bg-stone-700/50 transition-colors",children:t.name},t.id)),a&&!m&&e.jsxs("button",{type:"button",onClick:()=>{o(t=>({...t,cost_type_id:"",new_cost_type:a})),c(!1)},className:"w-full text-left px-3 py-2 text-sm text-emerald-400 hover:bg-stone-700/50 transition-colors border-t border-[#2d2a28]",children:['+ "',a,'"']})]}),e.jsx(i,{message:n.cost_type_id||n.new_cost_type,className:"mt-2"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(S,{label:s("common.amount"),value:r.amount,onChange:t=>o("amount",t),currency:r.currency,error:n.amount,required:!0})}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.is_paid,onChange:t=>o("is_paid",t.target.checked),className:"rounded border-plutz-tan/20 text-plutz-tan shadow-sm focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400",children:s("group_costs.mark_as_paid")})]}),e.jsx("p",{className:"mt-1 text-xs text-stone-500",children:s("group_costs.paid_hint")})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"notes",value:s("common.notes")}),e.jsx("textarea",{id:"notes",className:"mt-1 block w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan",rows:4,value:r.notes,onChange:t=>o("notes",t.target.value)}),e.jsx(i,{message:n.notes,className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx(f,{href:route("group-costs.index"),className:"text-sm text-stone-400 hover:text-plutz-cream",children:s("common.cancel")}),e.jsx(L,{disabled:j,children:s("group_costs.create_group_cost")})]})]})})})]})}export{P as default};
