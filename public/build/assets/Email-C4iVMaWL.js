import{r as u,u as f,j as e,H as g}from"./app-nIhZ8ZdS.js";import{A as b}from"./AuthenticatedLayout-CQ2bQ6Sm.js";import{u as j}from"./useTranslation-XdLIw_IH.js";import"./transition-_GbXnrEu.js";function y({settings:n}){const{t:s}=j(),[r,p]=u.useState(""),[i,d]=u.useState(!1),{data:a,setData:l,post:x,processing:c,errors:m}=f({mail_enabled:n.mail_enabled,mail_from_address:n.mail_from_address,mail_from_name:n.mail_from_name,mail_force_from:n.mail_force_from,mail_force_from_name:n.mail_force_from_name,mail_set_return_path:n.mail_set_return_path,mail_host:n.mail_host,mail_port:n.mail_port,mail_encryption:n.mail_encryption,mail_auto_tls:n.mail_auto_tls,mail_auth_enabled:n.mail_auth_enabled,mail_username:n.mail_username,mail_password:"",mail_admin_recipient:n.mail_admin_recipient}),h=t=>{t.preventDefault(),x(route("settings.email.update"))},_=t=>{t.preventDefault(),r&&(d(!0),window.axios.post(route("settings.email.test"),{test_email:r}).then(()=>{alert("Test email sent successfully!")}).catch(o=>{alert("Failed to send test email: "+(o.response?.data?.message||o.message))}).finally(()=>{d(!1)}))};return e.jsxs(b,{className:"bg-plutz-dark",children:[e.jsx(g,{title:s("settings.email_page_title")}),e.jsx("div",{className:"max-w-[1200px] mx-auto w-full p-6 pb-0",children:e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("h2",{className:"text-2xl font-serif text-plutz-cream",children:s("settings.email_page_title")})})}),e.jsx("div",{className:"max-w-[1200px] mx-auto w-full p-6",children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:`overflow-hidden shadow-sm sm:rounded-lg p-6 ${a.mail_enabled?"bg-plutz-surface":"bg-red-900/20 border border-red-700/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-plutz-cream",children:s("settings.mail_enabled")}),e.jsx("p",{className:"text-sm text-stone-400 mt-1",children:s("settings.mail_enabled_help")})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.mail_enabled,onChange:t=>l("mail_enabled",t.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-stone-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-plutz-tan rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-plutz-tan"})]})]}),!a.mail_enabled&&e.jsx("p",{className:"text-sm text-red-400 mt-3",children:s("settings.mail_disabled_warning")})]}),e.jsxs("div",{className:"bg-plutz-surface overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-plutz-cream mb-4",children:s("settings.sender_settings")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:s("settings.from_email")}),e.jsx("input",{type:"email",value:a.mail_from_address,onChange:t=>l("mail_from_address",t.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"}),m.mail_from_address&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:m.mail_from_address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:s("settings.from_name")}),e.jsx("input",{type:"text",value:a.mail_from_name,onChange:t=>l("mail_from_name",t.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"}),m.mail_from_name&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:m.mail_from_name})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.mail_force_from,onChange:t=>l("mail_force_from",t.target.checked),className:"rounded border-plutz-tan/20 text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400",children:s("settings.force_from")})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.mail_force_from_name,onChange:t=>l("mail_force_from_name",t.target.checked),className:"rounded border-plutz-tan/20 text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400",children:s("settings.force_sender_name")})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.mail_set_return_path,onChange:t=>l("mail_set_return_path",t.target.checked),className:"rounded border-plutz-tan/20 text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400",children:s("settings.return_path")})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:s("settings.admin_recipient")}),e.jsx("input",{type:"email",value:a.mail_admin_recipient,onChange:t=>l("mail_admin_recipient",t.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"}),e.jsx("p",{className:"text-sm text-stone-500 mt-1",children:s("settings.admin_recipient_help")}),m.mail_admin_recipient&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:m.mail_admin_recipient})]})]}),e.jsxs("div",{className:"bg-plutz-surface overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-plutz-cream mb-4",children:s("settings.smtp_settings")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:s("settings.smtp_host")}),e.jsx("input",{type:"text",value:a.mail_host,onChange:t=>l("mail_host",t.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"}),m.mail_host&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:m.mail_host})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:s("settings.smtp_port")}),e.jsx("input",{type:"number",value:a.mail_port,onChange:t=>l("mail_port",parseInt(t.target.value)),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"}),m.mail_port&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:m.mail_port}),e.jsx("p",{className:"text-sm text-stone-500 mt-1",children:s("settings.smtp_port_help")})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:s("settings.encryption")}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"none",checked:a.mail_encryption==="none",onChange:t=>l("mail_encryption",t.target.value),className:"text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400",children:s("settings.none")})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"ssl",checked:a.mail_encryption==="ssl",onChange:t=>l("mail_encryption",t.target.value),className:"text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400",children:"SSL"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"tls",checked:a.mail_encryption==="tls",onChange:t=>l("mail_encryption",t.target.value),className:"text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400",children:"TLS"})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.mail_auto_tls,onChange:t=>l("mail_auto_tls",t.target.checked),className:"rounded border-plutz-tan/20 text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400",children:s("settings.auto_tls")})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("label",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",checked:a.mail_auth_enabled,onChange:t=>l("mail_auth_enabled",t.target.checked),className:"rounded border-plutz-tan/20 text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400 font-medium",children:s("settings.authentication")})]}),a.mail_auth_enabled&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 ml-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:s("settings.smtp_username")}),e.jsx("input",{type:"text",value:a.mail_username,onChange:t=>l("mail_username",t.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"}),m.mail_username&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:m.mail_username})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:s("settings.smtp_password")}),e.jsx("input",{type:"password",value:a.mail_password,onChange:t=>l("mail_password",t.target.value),placeholder:n.has_password?"••••••••••":"Enter password",className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"}),e.jsx("p",{className:"text-sm text-stone-500 mt-1",children:n.has_password?s("settings.password_help_existing"):s("settings.password_help_new")}),m.mail_password&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:m.mail_password})]})]})]})]}),e.jsxs("div",{className:"bg-plutz-surface overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-plutz-cream mb-4",children:s("settings.test_email")}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"email",value:r,onChange:t=>p(t.target.value),placeholder:s("settings.test_placeholder"),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"})}),e.jsx("button",{type:"button",onClick:_,disabled:i||!r,className:"px-4 py-2 bg-stone-700 text-white rounded-md hover:bg-stone-700 disabled:opacity-50",children:s(i?"settings.test_sending":"settings.test_button")})]}),e.jsx("p",{className:"text-sm text-stone-500 mt-2",children:s("settings.test_help")})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-plutz-tan text-plutz-dark rounded-md hover:bg-plutz-tan/90 disabled:opacity-50",children:s(c?"common.loading":"settings.save_settings")})})]})})]})}export{y as default};
