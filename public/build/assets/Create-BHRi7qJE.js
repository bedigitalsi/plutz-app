import{u as N,r as u,j as e,H as z,L as _}from"./app-D2O3W1Qu.js";import{A as C}from"./AuthenticatedLayout-B2JoMBrU.js";import{T as k,I as i}from"./TextInput-DaC3xZdV.js";import{I as p}from"./InputLabel-dZmXMN2a.js";import{P as L}from"./PrimaryButton-CDsLNmlw.js";import{M as S}from"./MoneyInput-q5dCL7Ie.js";import{u as I}from"./useTranslation-BAbUX6IX.js";import"./transition-CJTkOmYA.js";function P({costTypes:x}){const{t:s}=I(),{data:l,setData:a,post:g,processing:j,errors:r}=N({cost_date:new Date().toISOString().split("T")[0],cost_type_id:"",new_cost_type:"",amount:"",currency:"EUR",is_paid:!1,notes:""}),[o,f]=u.useState(""),[w,n]=u.useState(!1),d=u.useRef(null),h=x.filter(t=>t.name.toLowerCase().includes(o.toLowerCase())),m=x.find(t=>t.name.toLowerCase()===o.toLowerCase()),b=t=>{a(c=>({...c,cost_type_id:String(t.id),new_cost_type:""})),f(t.name),n(!1)},v=t=>{f(t),n(!0),m||a(c=>({...c,cost_type_id:"",new_cost_type:t}))};u.useEffect(()=>{const t=c=>{d.current&&!d.current.contains(c.target)&&n(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const y=t=>{t.preventDefault(),g(route("group-costs.store"))};return e.jsxs(C,{className:"bg-plutz-dark",children:[e.jsx(z,{title:s("group_costs.new_group_cost")}),e.jsx("div",{className:"max-w-[1200px] mx-auto w-full p-6 pb-0",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-2xl font-serif text-plutz-cream",children:s("group_costs.new_group_cost")}),e.jsx(_,{href:route("group-costs.index"),className:"text-plutz-tan hover:text-plutz-tan-light text-sm font-medium",children:s("group_costs.back_to_list")})]})}),e.jsx("div",{className:"max-w-[1200px] mx-auto w-full p-6",children:e.jsx("div",{className:"overflow-hidden bg-plutz-surface shadow-sm sm:rounded-lg",children:e.jsxs("form",{onSubmit:y,className:"space-y-6 p-6",children:[e.jsxs("div",{className:"border-b border-plutz-tan/10 pb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-plutz-cream",children:s("group_costs.cost_details")}),e.jsx("p",{className:"mt-1 text-sm text-stone-400",children:s("group_costs.track_expenses")}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"cost_date",value:s("group_costs.cost_date")}),e.jsx(k,{id:"cost_date",type:"date",className:"mt-1 block w-full",value:l.cost_date,onChange:t=>a("cost_date",t.target.value)}),e.jsx(i,{message:r.cost_date,className:"mt-2"})]}),e.jsxs("div",{ref:d,className:"relative",children:[e.jsx(p,{htmlFor:"cost_type",value:s("group_costs.cost_type_field")}),e.jsx("input",{id:"cost_type",type:"text",className:"mt-1 block w-full rounded-md border-plutz-tan/20 bg-plutz-dark text-plutz-cream shadow-sm focus:border-plutz-tan focus:ring-plutz-tan",value:o,onChange:t=>v(t.target.value),onFocus:()=>n(!0),placeholder:s("group_costs.select_type"),autoComplete:"off"}),w&&(h.length>0||o&&!m)&&e.jsxs("div",{className:"absolute z-50 mt-1 w-full rounded-md bg-plutz-surface border border-[#2d2a28] shadow-xl max-h-48 overflow-y-auto",children:[h.map(t=>e.jsx("button",{type:"button",onClick:()=>b(t),className:"w-full text-left px-3 py-2 text-sm text-plutz-cream hover:bg-stone-700/50 transition-colors",children:t.name},t.id)),o&&!m&&e.jsxs("button",{type:"button",onClick:()=>{a(t=>({...t,cost_type_id:"",new_cost_type:o})),n(!1)},className:"w-full text-left px-3 py-2 text-sm text-emerald-400 hover:bg-stone-700/50 transition-colors border-t border-[#2d2a28]",children:['+ "',o,'"']})]}),e.jsx(i,{message:r.cost_type_id||r.new_cost_type,className:"mt-2"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(S,{label:s("common.amount"),value:l.amount,onChange:t=>a("amount",t),currency:l.currency,error:r.amount,required:!0})})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"notes",value:s("common.notes")}),e.jsx("textarea",{id:"notes",className:"mt-1 block w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan",rows:4,value:l.notes,onChange:t=>a("notes",t.target.value)}),e.jsx(i,{message:r.notes,className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx(_,{href:route("group-costs.index"),className:"text-sm text-stone-400 hover:text-plutz-cream",children:s("common.cancel")}),e.jsx(L,{disabled:j,children:s("group_costs.create_group_cost")})]})]})})})]})}export{P as default};
