import{u as x,r as h,j as e,H as f,L as o}from"./app-vd_5vZFp.js";import{A as b}from"./AuthenticatedLayout-_FQx_mKr.js";import{u as _}from"./useTranslation-mjmPwNPG.js";import"./transition-kDmOH011.js";function z({auth:j,contract:a}){const{t}=_(),{data:n,setData:r,patch:i,processing:d,errors:l}=x({client_name:a.client_name,client_email:a.client_email,client_company:a.client_company||"",client_address:a.client_address||"",performance_date:a.performance_date?a.performance_date.substring(0,10):"",total_price:a.total_price,deposit_amount:a.deposit_amount||"",currency:a.currency,markdown_snapshot:a.markdown_snapshot}),[c,m]=h.useState(!1),u=s=>{s.preventDefault(),i(route("contracts.update",a.id))};return e.jsxs(b,{className:"bg-plutz-dark",children:[e.jsx(f,{title:t("contracts.edit_contract")}),e.jsx("div",{className:"max-w-[1200px] mx-auto w-full p-6 pb-0",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-2xl font-serif text-plutz-cream",children:t("contracts.edit_contract")}),e.jsx(o,{href:route("contracts.show",a.id),className:"text-plutz-tan hover:text-plutz-tan-light text-sm font-medium",children:t("contracts.back_to_contract")})]})}),e.jsx("div",{className:"max-w-[1200px] mx-auto w-full p-6",children:e.jsx("div",{className:"bg-plutz-surface overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("form",{onSubmit:u,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-plutz-cream mb-4",children:t("contracts.client_information")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:t("contracts.client_name_field")}),e.jsx("input",{type:"text",value:n.client_name,onChange:s=>r("client_name",s.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan",required:!0}),l.client_name&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:l.client_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:t("contracts.client_email_field")}),e.jsx("input",{type:"email",value:n.client_email,onChange:s=>r("client_email",s.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan",required:!0}),l.client_email&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:l.client_email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:t("contracts.company_optional")}),e.jsx("input",{type:"text",value:n.client_company,onChange:s=>r("client_company",s.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:t("contracts.performance_date_field")}),e.jsx("input",{type:"date",value:n.performance_date,onChange:s=>r("performance_date",s.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan",required:!0}),l.performance_date&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:l.performance_date})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:t("contracts.address_optional")}),e.jsx("textarea",{value:n.client_address,onChange:s=>r("client_address",s.target.value),rows:3,className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-plutz-cream mb-4",children:t("contracts.financial_details")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:t("contracts.total_price_field")}),e.jsx("input",{type:"number",step:"0.01",value:n.total_price,onChange:s=>r("total_price",s.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan",required:!0}),l.total_price&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:l.total_price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:t("contracts.deposit_amount")}),e.jsx("input",{type:"number",step:"0.01",value:n.deposit_amount,onChange:s=>r("deposit_amount",s.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:t("contracts.currency")}),e.jsxs("select",{value:n.currency,onChange:s=>r("currency",s.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan",children:[e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"GBP",children:"GBP"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-plutz-cream",children:t("contracts.contract_content")}),e.jsx("button",{type:"button",onClick:()=>m(!c),className:"text-sm text-plutz-tan hover:text-plutz-tan",children:t(c?"contracts.hide_preview":"contracts.show_preview")})]}),e.jsxs("div",{className:"text-sm text-stone-400 mb-2",children:[t("contracts.placeholders_hint")," [NAROÄŒNIK], [EMAIL], [PODJETJE], [NASLOV], [DATUM_NASTOPA], [SKUPNI_ZNESEK], [AVANS]"]}),e.jsx("textarea",{value:n.markdown_snapshot,onChange:s=>r("markdown_snapshot",s.target.value),rows:15,className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan font-mono text-sm",required:!0}),l.markdown_snapshot&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:l.markdown_snapshot}),c&&e.jsxs("div",{className:"mt-4 p-4 border border-plutz-tan/20 rounded-md bg-stone-900/50",children:[e.jsx("h4",{className:"font-medium mb-2",children:t("contracts.preview")}),e.jsx("div",{className:"prose max-w-none",children:n.markdown_snapshot.split(`
`).map((s,p)=>e.jsx("p",{children:s},p))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(o,{href:route("contracts.show",a.id),className:"px-4 py-2 bg-plutz-tan/20 text-stone-400 rounded-md hover:bg-plutz-tan/30",children:t("common.cancel")}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-plutz-tan text-plutz-dark rounded-md hover:bg-plutz-tan/90 disabled:opacity-50",children:t(d?"contracts.saving":"contracts.save_changes")})]})]})})})]})}export{z as default};
