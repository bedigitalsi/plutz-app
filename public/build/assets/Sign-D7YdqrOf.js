import{g as Re,R as Ie,r as N,u as Me,j as d,H as ge,b as Be}from"./app-DiVRFiG4.js";import{u as qe}from"./useTranslation-DwCvqw2x.js";function J(){return J=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var t in s)({}).hasOwnProperty.call(s,t)&&(r[t]=s[t])}return r},J.apply(null,arguments)}function We(r,e){if(r==null)return{};var s={};for(var t in r)if({}.hasOwnProperty.call(r,t)){if(e.indexOf(t)!==-1)continue;s[t]=r[t]}return s}function Fe(r,e){if(r==null)return{};var s,t,n=We(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(t=0;t<a.length;t++)s=a[t],e.indexOf(s)===-1&&{}.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function K(r){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(r)}function Ue(r,e,s){return Object.defineProperty(r,"prototype",{writable:!1}),r}function Ze(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ee(r,e){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,t){return s.__proto__=t,s},ee(r,e)}function He(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&ee(r,e)}function W(r){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(r)}function Te(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Te=function(){return!!r})()}function Qe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Ge(r,e){if(e&&(K(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qe(r)}function Xe(r){var e=Te();return function(){var s,t=W(r);if(e){var n=W(this).constructor;s=Reflect.construct(t,arguments,n)}else s=t.apply(this,arguments);return Ge(this,s)}}var X={exports:{}},V,fe;function Ve(){if(fe)return V;fe=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return V=r,V}var Y,xe;function Ye(){if(xe)return Y;xe=1;var r=Ve();function e(){}function s(){}return s.resetWarningCache=e,Y=function(){function t(i,o,l,h,c,u){if(u!==r){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}t.isRequired=t;function n(){return t}var a={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:n,element:t,elementType:t,instanceOf:n,node:t,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:s,resetWarningCache:e};return a.PropTypes=a,a},Y}var me;function Je(){return me||(me=1,X.exports=Ye()()),X.exports}var Ke=Je();const S=Re(Ke);function E(r,e,s){this.x=r,this.y=e,this.time=s||new Date().getTime()}E.prototype.velocityFrom=function(r){return this.time!==r.time?this.distanceTo(r)/(this.time-r.time):1};E.prototype.distanceTo=function(r){return Math.sqrt(Math.pow(this.x-r.x,2)+Math.pow(this.y-r.y,2))};E.prototype.equals=function(r){return this.x===r.x&&this.y===r.y&&this.time===r.time};function se(r,e,s,t){this.startPoint=r,this.control1=e,this.control2=s,this.endPoint=t}se.prototype.length=function(){for(var r=10,e=0,s=void 0,t=void 0,n=0;n<=r;n+=1){var a=n/r,i=this._point(a,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),o=this._point(a,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(n>0){var l=i-s,h=o-t;e+=Math.sqrt(l*l+h*h)}s=i,t=o}return e};se.prototype._point=function(r,e,s,t,n){return e*(1-r)*(1-r)*(1-r)+3*s*(1-r)*(1-r)*r+3*t*(1-r)*r*r+n*r*r*r};function et(r,e,s){var t,n,a,i=null,o=0;s||(s={});var l=function(){o=s.leading===!1?0:Date.now(),i=null,a=r.apply(t,n),i||(t=n=null)};return function(){var h=Date.now();!o&&s.leading===!1&&(o=h);var c=e-(h-o);return t=this,n=arguments,c<=0||c>e?(i&&(clearTimeout(i),i=null),o=h,a=r.apply(t,n),i||(t=n=null)):!i&&s.trailing!==!1&&(i=setTimeout(l,c)),a}}function w(r,e){var s=this,t=e||{};this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle="throttle"in t?t.throttle:16,this.minDistance="minDistance"in t?t.minDistance:5,this.throttle?this._strokeMoveUpdate=et(w.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=w.prototype._strokeUpdate,this.dotSize=t.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.onBegin=t.onBegin,this.onEnd=t.onEnd,this._canvas=r,this._ctx=r.getContext("2d"),this.clear(),this._handleMouseDown=function(n){n.which===1&&(s._mouseButtonDown=!0,s._strokeBegin(n))},this._handleMouseMove=function(n){s._mouseButtonDown&&s._strokeMoveUpdate(n)},this._handleMouseUp=function(n){n.which===1&&s._mouseButtonDown&&(s._mouseButtonDown=!1,s._strokeEnd(n))},this._handleTouchStart=function(n){if(n.targetTouches.length===1){var a=n.changedTouches[0];s._strokeBegin(a)}},this._handleTouchMove=function(n){n.preventDefault();var a=n.targetTouches[0];s._strokeMoveUpdate(a)},this._handleTouchEnd=function(n){var a=n.target===s._canvas;a&&(n.preventDefault(),s._strokeEnd(n))},this.on()}w.prototype.clear=function(){var r=this._ctx,e=this._canvas;r.fillStyle=this.backgroundColor,r.clearRect(0,0,e.width,e.height),r.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0};w.prototype.fromDataURL=function(r){var e=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=new Image,n=s.ratio||window.devicePixelRatio||1,a=s.width||this._canvas.width/n,i=s.height||this._canvas.height/n;this._reset(),t.src=r,t.onload=function(){e._ctx.drawImage(t,0,0,a,i)},this._isEmpty=!1};w.prototype.toDataURL=function(r){var e;switch(r){case"image/svg+xml":return this._toSVG();default:for(var s=arguments.length,t=Array(s>1?s-1:0),n=1;n<s;n++)t[n-1]=arguments[n];return(e=this._canvas).toDataURL.apply(e,[r].concat(t))}};w.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};w.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};w.prototype.isEmpty=function(){return this._isEmpty};w.prototype._strokeBegin=function(r){this._data.push([]),this._reset(),this._strokeUpdate(r),typeof this.onBegin=="function"&&this.onBegin(r)};w.prototype._strokeUpdate=function(r){var e=r.clientX,s=r.clientY,t=this._createPoint(e,s),n=this._data[this._data.length-1],a=n&&n[n.length-1],i=a&&t.distanceTo(a)<this.minDistance;if(!(a&&i)){var o=this._addPoint(t),l=o.curve,h=o.widths;l&&h&&this._drawCurve(l,h.start,h.end),this._data[this._data.length-1].push({x:t.x,y:t.y,time:t.time,color:this.penColor})}};w.prototype._strokeEnd=function(r){var e=this.points.length>2,s=this.points[0];if(!e&&s&&this._drawDot(s),s){var t=this._data[this._data.length-1],n=t[t.length-1];s.equals(n)||t.push({x:s.x,y:s.y,time:s.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(r)};w.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};w.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};w.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};w.prototype._createPoint=function(r,e,s){var t=this._canvas.getBoundingClientRect();return new E(r-t.left,e-t.top,s||new Date().getTime())};w.prototype._addPoint=function(r){var e=this.points,s=void 0;if(e.push(r),e.length>2){e.length===3&&e.unshift(e[0]),s=this._calculateCurveControlPoints(e[0],e[1],e[2]);var t=s.c2;s=this._calculateCurveControlPoints(e[1],e[2],e[3]);var n=s.c1,a=new se(e[1],t,n,e[2]),i=this._calculateCurveWidths(a);return e.shift(),{curve:a,widths:i}}return{}};w.prototype._calculateCurveControlPoints=function(r,e,s){var t=r.x-e.x,n=r.y-e.y,a=e.x-s.x,i=e.y-s.y,o={x:(r.x+e.x)/2,y:(r.y+e.y)/2},l={x:(e.x+s.x)/2,y:(e.y+s.y)/2},h=Math.sqrt(t*t+n*n),c=Math.sqrt(a*a+i*i),u=o.x-l.x,p=o.y-l.y,g=c/(h+c),x={x:l.x+u*g,y:l.y+p*g},m=e.x-x.x,v=e.y-x.y;return{c1:new E(o.x+m,o.y+v),c2:new E(l.x+m,l.y+v)}};w.prototype._calculateCurveWidths=function(r){var e=r.startPoint,s=r.endPoint,t={start:null,end:null},n=this.velocityFilterWeight*s.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,a=this._strokeWidth(n);return t.start=this._lastWidth,t.end=a,this._lastVelocity=n,this._lastWidth=a,t};w.prototype._strokeWidth=function(r){return Math.max(this.maxWidth/(r+1),this.minWidth)};w.prototype._drawPoint=function(r,e,s){var t=this._ctx;t.moveTo(r,e),t.arc(r,e,s,0,2*Math.PI,!1),this._isEmpty=!1};w.prototype._drawCurve=function(r,e,s){var t=this._ctx,n=s-e,a=Math.floor(r.length());t.beginPath();for(var i=0;i<a;i+=1){var o=i/a,l=o*o,h=l*o,c=1-o,u=c*c,p=u*c,g=p*r.startPoint.x;g+=3*u*o*r.control1.x,g+=3*c*l*r.control2.x,g+=h*r.endPoint.x;var x=p*r.startPoint.y;x+=3*u*o*r.control1.y,x+=3*c*l*r.control2.y,x+=h*r.endPoint.y;var m=e+h*n;this._drawPoint(g,x,m)}t.closePath(),t.fill()};w.prototype._drawDot=function(r){var e=this._ctx,s=typeof this.dotSize=="function"?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(r.x,r.y,s),e.closePath(),e.fill()};w.prototype._fromData=function(r,e,s){for(var t=0;t<r.length;t+=1){var n=r[t];if(n.length>1)for(var a=0;a<n.length;a+=1){var i=n[a],o=new E(i.x,i.y,i.time),l=i.color;if(a===0)this.penColor=l,this._reset(),this._addPoint(o);else if(a!==n.length-1){var h=this._addPoint(o),c=h.curve,u=h.widths;c&&u&&e(c,u,l)}}else{this._reset();var p=n[0];s(p)}}};w.prototype._toSVG=function(){var r=this,e=this._data,s=this._canvas,t=Math.max(window.devicePixelRatio||1,1),n=0,a=0,i=s.width/t,o=s.height/t,l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttributeNS(null,"width",s.width),l.setAttributeNS(null,"height",s.height),this._fromData(e,function(f,y,z){var R=document.createElement("path");if(!isNaN(f.control1.x)&&!isNaN(f.control1.y)&&!isNaN(f.control2.x)&&!isNaN(f.control2.y)){var C="M "+f.startPoint.x.toFixed(3)+","+f.startPoint.y.toFixed(3)+" "+("C "+f.control1.x.toFixed(3)+","+f.control1.y.toFixed(3)+" ")+(f.control2.x.toFixed(3)+","+f.control2.y.toFixed(3)+" ")+(f.endPoint.x.toFixed(3)+","+f.endPoint.y.toFixed(3));R.setAttribute("d",C),R.setAttribute("stroke-width",(y.end*2.25).toFixed(3)),R.setAttribute("stroke",z),R.setAttribute("fill","none"),R.setAttribute("stroke-linecap","round"),l.appendChild(R)}},function(f){var y=document.createElement("circle"),z=typeof r.dotSize=="function"?r.dotSize():r.dotSize;y.setAttribute("r",z),y.setAttribute("cx",f.x),y.setAttribute("cy",f.y),y.setAttribute("fill",f.color),l.appendChild(y)});var h="data:image/svg+xml;base64,",c='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+n+" "+a+" "+i+" "+o+'"')+(' width="'+i+'"')+(' height="'+o+'"')+">",u=l.innerHTML;if(u===void 0){var p=document.createElement("dummy"),g=l.childNodes;p.innerHTML="";for(var x=0;x<g.length;x+=1)p.appendChild(g[x].cloneNode(!0));u=p.innerHTML}var m="</svg>",v=c+u+m;return h+btoa(v)};w.prototype.fromData=function(r){var e=this;this.clear(),this._fromData(r,function(s,t){return e._drawCurve(s,t.start,t.end)},function(s){return e._drawDot(s)}),this._data=r};w.prototype.toData=function(){return this._data};var q={exports:{}},tt=q.exports,ke;function rt(){return ke||(ke=1,(function(r,e){(function(s,t){r.exports=t()})(tt,function(){return(function(s){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return s[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=s,t.c=n,t.p="",t(0)})([function(s,t){function n(h){var c=h.getContext("2d"),u=h.width,p=h.height,g=c.getImageData(0,0,u,p).data,x=o(!0,u,p,g),m=o(!1,u,p,g),v=l(!0,u,p,g),f=l(!1,u,p,g),y=f-v+1,z=m-x+1,R=c.getImageData(v,x,y,z);return h.width=y,h.height=z,c.clearRect(0,0,y,z),c.putImageData(R,0,0),h}function a(h,c,u,p){return{red:p[4*(u*c+h)],green:p[4*(u*c+h)+1],blue:p[4*(u*c+h)+2],alpha:p[4*(u*c+h)+3]}}function i(h,c,u,p){return a(h,c,u,p).alpha}function o(h,c,u,p){for(var g=h?1:-1,x=h?0:u-1,m=x;h?m<u:m>-1;m+=g)for(var v=0;v<c;v++)if(i(v,m,c,p))return m;return null}function l(h,c,u,p){for(var g=h?1:-1,x=h?0:c-1,m=x;h?m<c:m>-1;m+=g)for(var v=0;v<u;v++)if(i(m,v,c,p))return m;return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}])})})(q)),q.exports}var nt=rt();const st=Re(nt);var it=["canvasProps","clearOnResize"],H=(function(r){He(s,r);var e=Xe(s);function s(){var t;Ze(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a)),t.staticThis=t.constructor,t._sigPad=null,t._canvas=null,t.setRef=function(o){t._canvas=o,t._canvas===null&&(t._sigPad=null)},t._excludeOurProps=function(){var o=t.props;o.canvasProps,o.clearOnResize;var l=Fe(o,it);return l},t.componentDidMount=function(){var o=t.getCanvas();t._sigPad=new w(o,t._excludeOurProps()),t._resizeCanvas(),t.on()},t.componentWillUnmount=function(){t.off()},t.componentDidUpdate=function(){Object.assign(t._sigPad,t._excludeOurProps())},t.getCanvas=function(){if(t._canvas===null)throw t.staticThis.refNullError;return t._canvas},t.getTrimmedCanvas=function(){var o=t.getCanvas(),l=document.createElement("canvas");return l.width=o.width,l.height=o.height,l.getContext("2d").drawImage(o,0,0),st(l)},t.getSignaturePad=function(){if(t._sigPad===null)throw t.staticThis.refNullError;return t._sigPad},t._checkClearOnResize=function(){t.props.clearOnResize&&t._resizeCanvas()},t._resizeCanvas=function(){var o,l,h=(o=t.props.canvasProps)!==null&&o!==void 0?o:{},c=h.width,u=h.height;if(!(typeof c<"u"&&typeof u<"u")){var p=t.getCanvas(),g=Math.max((l=window.devicePixelRatio)!==null&&l!==void 0?l:1,1);typeof c>"u"&&(p.width=p.offsetWidth*g),typeof u>"u"&&(p.height=p.offsetHeight*g),p.getContext("2d").scale(g,g),t.clear()}},t.render=function(){var o=t.props.canvasProps;return Ie.createElement("canvas",J({ref:t.setRef},o))},t.on=function(){return window.addEventListener("resize",t._checkClearOnResize),t.getSignaturePad().on()},t.off=function(){return window.removeEventListener("resize",t._checkClearOnResize),t.getSignaturePad().off()},t.clear=function(){return t.getSignaturePad().clear()},t.isEmpty=function(){return t.getSignaturePad().isEmpty()},t.fromDataURL=function(o,l){return t.getSignaturePad().fromDataURL(o,l)},t.toDataURL=function(o,l){return t.getSignaturePad().toDataURL(o,l)},t.fromData=function(o){return t.getSignaturePad().fromData(o)},t.toData=function(){return t.getSignaturePad().toData()},t}return Ue(s)})(N.Component);H.propTypes={velocityFilterWeight:S.number,minWidth:S.number,maxWidth:S.number,minDistance:S.number,dotSize:S.oneOfType([S.number,S.func]),penColor:S.string,throttle:S.number,onEnd:S.func,onBegin:S.func,canvasProps:S.object,clearOnResize:S.bool};H.defaultProps={clearOnResize:!0};H.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");function ie(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var j=ie();function Pe(r){j=r}var I={exec:()=>null};function k(r,e=""){let s=typeof r=="string"?r:r.source,t={replace:(n,a)=>{let i=typeof a=="string"?a:a.source;return i=i.replace(_.caret,"$1"),s=s.replace(n,i),t},getRegex:()=>new RegExp(s,e)};return t}var at=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),_={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:r=>new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}#`),htmlBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}<(?:[a-z].*>|!--)`,"i")},lt=/^(?:[ \t]*(?:\n|$))+/,ot=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,ct=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,M=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,ht=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ae=/(?:[*+-]|\d{1,9}[.)])/,ze=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,$e=k(ze).replace(/bull/g,ae).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),ut=k(ze).replace(/bull/g,ae).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),le=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,pt=/^[^\n]+/,oe=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,dt=k(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",oe).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),gt=k(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ae).getRegex(),Q="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ce=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ft=k("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ce).replace("tag",Q).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ce=k(le).replace("hr",M).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Q).getRegex(),xt=k(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ce).getRegex(),he={blockquote:xt,code:ot,def:dt,fences:ct,heading:ht,hr:M,html:ft,lheading:$e,list:gt,newline:lt,paragraph:Ce,table:I,text:pt},be=k("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",M).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Q).getRegex(),mt={...he,lheading:ut,table:be,paragraph:k(le).replace("hr",M).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",be).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Q).getRegex()},kt={...he,html:k(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ce).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:I,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:k(le).replace("hr",M).replace("heading",` *#{1,6} *[^
]`).replace("lheading",$e).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},bt=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,wt=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ee=/^( {2,}|\\)\n(?!\s*$)/,vt=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,G=/[\p{P}\p{S}]/u,ue=/[\s\p{P}\p{S}]/u,Ae=/[^\s\p{P}\p{S}]/u,yt=k(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,ue).getRegex(),je=/(?!~)[\p{P}\p{S}]/u,_t=/(?!~)[\s\p{P}\p{S}]/u,St=/(?:[^\s\p{P}\p{S}]|~)/u,Rt=k(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",at?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Ne=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Tt=k(Ne,"u").replace(/punct/g,G).getRegex(),Pt=k(Ne,"u").replace(/punct/g,je).getRegex(),Le="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",zt=k(Le,"gu").replace(/notPunctSpace/g,Ae).replace(/punctSpace/g,ue).replace(/punct/g,G).getRegex(),$t=k(Le,"gu").replace(/notPunctSpace/g,St).replace(/punctSpace/g,_t).replace(/punct/g,je).getRegex(),Ct=k("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Ae).replace(/punctSpace/g,ue).replace(/punct/g,G).getRegex(),Et=k(/\\(punct)/,"gu").replace(/punct/g,G).getRegex(),At=k(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),jt=k(ce).replace("(?:-->|$)","-->").getRegex(),Nt=k("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",jt).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),F=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Lt=k(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",F).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),De=k(/^!?\[(label)\]\[(ref)\]/).replace("label",F).replace("ref",oe).getRegex(),Oe=k(/^!?\[(ref)\](?:\[\])?/).replace("ref",oe).getRegex(),Dt=k("reflink|nolink(?!\\()","g").replace("reflink",De).replace("nolink",Oe).getRegex(),we=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,pe={_backpedal:I,anyPunctuation:Et,autolink:At,blockSkip:Rt,br:Ee,code:wt,del:I,emStrongLDelim:Tt,emStrongRDelimAst:zt,emStrongRDelimUnd:Ct,escape:bt,link:Lt,nolink:Oe,punctuation:yt,reflink:De,reflinkSearch:Dt,tag:Nt,text:vt,url:I},Ot={...pe,link:k(/^!?\[(label)\]\((.*?)\)/).replace("label",F).getRegex(),reflink:k(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",F).getRegex()},te={...pe,emStrongRDelimAst:$t,emStrongLDelim:Pt,url:k(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",we).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:k(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",we).getRegex()},It={...te,br:k(Ee).replace("{2,}","*").getRegex(),text:k(te.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},B={normal:he,gfm:mt,pedantic:kt},L={normal:pe,gfm:te,breaks:It,pedantic:Ot},Mt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ve=r=>Mt[r];function $(r,e){if(e){if(_.escapeTest.test(r))return r.replace(_.escapeReplace,ve)}else if(_.escapeTestNoEncode.test(r))return r.replace(_.escapeReplaceNoEncode,ve);return r}function ye(r){try{r=encodeURI(r).replace(_.percentDecode,"%")}catch{return null}return r}function _e(r,e){let s=r.replace(_.findPipe,(a,i,o)=>{let l=!1,h=i;for(;--h>=0&&o[h]==="\\";)l=!l;return l?"|":" |"}),t=s.split(_.splitPipe),n=0;if(t[0].trim()||t.shift(),t.length>0&&!t.at(-1)?.trim()&&t.pop(),e)if(t.length>e)t.splice(e);else for(;t.length<e;)t.push("");for(;n<t.length;n++)t[n]=t[n].trim().replace(_.slashPipe,"|");return t}function D(r,e,s){let t=r.length;if(t===0)return"";let n=0;for(;n<t&&r.charAt(t-n-1)===e;)n++;return r.slice(0,t-n)}function Bt(r,e){if(r.indexOf(e[1])===-1)return-1;let s=0;for(let t=0;t<r.length;t++)if(r[t]==="\\")t++;else if(r[t]===e[0])s++;else if(r[t]===e[1]&&(s--,s<0))return t;return s>0?-2:-1}function Se(r,e,s,t,n){let a=e.href,i=e.title||null,o=r[1].replace(n.other.outputLinkReplace,"$1");t.state.inLink=!0;let l={type:r[0].charAt(0)==="!"?"image":"link",raw:s,href:a,title:i,text:o,tokens:t.inlineTokens(o)};return t.state.inLink=!1,l}function qt(r,e,s){let t=r.match(s.other.indentCodeCompensation);if(t===null)return e;let n=t[1];return e.split(`
`).map(a=>{let i=a.match(s.other.beginningSpace);if(i===null)return a;let[o]=i;return o.length>=n.length?a.slice(n.length):a}).join(`
`)}var U=class{options;rules;lexer;constructor(r){this.options=r||j}space(r){let e=this.rules.block.newline.exec(r);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(r){let e=this.rules.block.code.exec(r);if(e){let s=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?s:D(s,`
`)}}}fences(r){let e=this.rules.block.fences.exec(r);if(e){let s=e[0],t=qt(s,e[3]||"",this.rules);return{type:"code",raw:s,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:t}}}heading(r){let e=this.rules.block.heading.exec(r);if(e){let s=e[2].trim();if(this.rules.other.endingHash.test(s)){let t=D(s,"#");(this.options.pedantic||!t||this.rules.other.endingSpaceChar.test(t))&&(s=t.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(r){let e=this.rules.block.hr.exec(r);if(e)return{type:"hr",raw:D(e[0],`
`)}}blockquote(r){let e=this.rules.block.blockquote.exec(r);if(e){let s=D(e[0],`
`).split(`
`),t="",n="",a=[];for(;s.length>0;){let i=!1,o=[],l;for(l=0;l<s.length;l++)if(this.rules.other.blockquoteStart.test(s[l]))o.push(s[l]),i=!0;else if(!i)o.push(s[l]);else break;s=s.slice(l);let h=o.join(`
`),c=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");t=t?`${t}
${h}`:h,n=n?`${n}
${c}`:c;let u=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,a,!0),this.lexer.state.top=u,s.length===0)break;let p=a.at(-1);if(p?.type==="code")break;if(p?.type==="blockquote"){let g=p,x=g.raw+`
`+s.join(`
`),m=this.blockquote(x);a[a.length-1]=m,t=t.substring(0,t.length-g.raw.length)+m.raw,n=n.substring(0,n.length-g.text.length)+m.text;break}else if(p?.type==="list"){let g=p,x=g.raw+`
`+s.join(`
`),m=this.list(x);a[a.length-1]=m,t=t.substring(0,t.length-p.raw.length)+m.raw,n=n.substring(0,n.length-g.raw.length)+m.raw,s=x.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:t,tokens:a,text:n}}}list(r){let e=this.rules.block.list.exec(r);if(e){let s=e[1].trim(),t=s.length>1,n={type:"list",raw:"",ordered:t,start:t?+s.slice(0,-1):"",loose:!1,items:[]};s=t?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=t?s:"[*+-]");let a=this.rules.other.listItemRegex(s),i=!1;for(;r;){let l=!1,h="",c="";if(!(e=a.exec(r))||this.rules.block.hr.test(r))break;h=e[0],r=r.substring(h.length);let u=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,m=>" ".repeat(3*m.length)),p=r.split(`
`,1)[0],g=!u.trim(),x=0;if(this.options.pedantic?(x=2,c=u.trimStart()):g?x=e[1].length+1:(x=e[2].search(this.rules.other.nonSpaceChar),x=x>4?1:x,c=u.slice(x),x+=e[1].length),g&&this.rules.other.blankLine.test(p)&&(h+=p+`
`,r=r.substring(p.length+1),l=!0),!l){let m=this.rules.other.nextBulletRegex(x),v=this.rules.other.hrRegex(x),f=this.rules.other.fencesBeginRegex(x),y=this.rules.other.headingBeginRegex(x),z=this.rules.other.htmlBeginRegex(x);for(;r;){let R=r.split(`
`,1)[0],C;if(p=R,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),C=p):C=p.replace(this.rules.other.tabCharGlobal,"    "),f.test(p)||y.test(p)||z.test(p)||m.test(p)||v.test(p))break;if(C.search(this.rules.other.nonSpaceChar)>=x||!p.trim())c+=`
`+C.slice(x);else{if(g||u.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||f.test(u)||y.test(u)||v.test(u))break;c+=`
`+p}!g&&!p.trim()&&(g=!0),h+=R+`
`,r=r.substring(R.length+1),u=C.slice(x)}}n.loose||(i?n.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(i=!0)),n.items.push({type:"list_item",raw:h,task:!!this.options.gfm&&this.rules.other.listIsTask.test(c),loose:!1,text:c,tokens:[]}),n.raw+=h}let o=n.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let l of n.items){if(this.lexer.state.top=!1,l.tokens=this.lexer.blockTokens(l.text,[]),l.task){if(l.text=l.text.replace(this.rules.other.listReplaceTask,""),l.tokens[0]?.type==="text"||l.tokens[0]?.type==="paragraph"){l.tokens[0].raw=l.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),l.tokens[0].text=l.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let c=this.lexer.inlineQueue.length-1;c>=0;c--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[c].src)){this.lexer.inlineQueue[c].src=this.lexer.inlineQueue[c].src.replace(this.rules.other.listReplaceTask,"");break}}let h=this.rules.other.listTaskCheckbox.exec(l.raw);if(h){let c={type:"checkbox",raw:h[0]+" ",checked:h[0]!=="[ ]"};l.checked=c.checked,n.loose?l.tokens[0]&&["paragraph","text"].includes(l.tokens[0].type)&&"tokens"in l.tokens[0]&&l.tokens[0].tokens?(l.tokens[0].raw=c.raw+l.tokens[0].raw,l.tokens[0].text=c.raw+l.tokens[0].text,l.tokens[0].tokens.unshift(c)):l.tokens.unshift({type:"paragraph",raw:c.raw,text:c.raw,tokens:[c]}):l.tokens.unshift(c)}}if(!n.loose){let h=l.tokens.filter(u=>u.type==="space"),c=h.length>0&&h.some(u=>this.rules.other.anyLine.test(u.raw));n.loose=c}}if(n.loose)for(let l of n.items){l.loose=!0;for(let h of l.tokens)h.type==="text"&&(h.type="paragraph")}return n}}html(r){let e=this.rules.block.html.exec(r);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(r){let e=this.rules.block.def.exec(r);if(e){let s=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),t=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:s,raw:e[0],href:t,title:n}}}table(r){let e=this.rules.block.table.exec(r);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let s=_e(e[1]),t=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:e[0],header:[],align:[],rows:[]};if(s.length===t.length){for(let i of t)this.rules.other.tableAlignRight.test(i)?a.align.push("right"):this.rules.other.tableAlignCenter.test(i)?a.align.push("center"):this.rules.other.tableAlignLeft.test(i)?a.align.push("left"):a.align.push(null);for(let i=0;i<s.length;i++)a.header.push({text:s[i],tokens:this.lexer.inline(s[i]),header:!0,align:a.align[i]});for(let i of n)a.rows.push(_e(i,a.header.length).map((o,l)=>({text:o,tokens:this.lexer.inline(o),header:!1,align:a.align[l]})));return a}}lheading(r){let e=this.rules.block.lheading.exec(r);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(r){let e=this.rules.block.paragraph.exec(r);if(e){let s=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:s,tokens:this.lexer.inline(s)}}}text(r){let e=this.rules.block.text.exec(r);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(r){let e=this.rules.inline.escape.exec(r);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(r){let e=this.rules.inline.tag.exec(r);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(r){let e=this.rules.inline.link.exec(r);if(e){let s=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(s)){if(!this.rules.other.endAngleBracket.test(s))return;let a=D(s.slice(0,-1),"\\");if((s.length-a.length)%2===0)return}else{let a=Bt(e[2],"()");if(a===-2)return;if(a>-1){let i=(e[0].indexOf("!")===0?5:4)+e[1].length+a;e[2]=e[2].substring(0,a),e[0]=e[0].substring(0,i).trim(),e[3]=""}}let t=e[2],n="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(t);a&&(t=a[1],n=a[3])}else n=e[3]?e[3].slice(1,-1):"";return t=t.trim(),this.rules.other.startAngleBracket.test(t)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(s)?t=t.slice(1):t=t.slice(1,-1)),Se(e,{href:t&&t.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(r,e){let s;if((s=this.rules.inline.reflink.exec(r))||(s=this.rules.inline.nolink.exec(r))){let t=(s[2]||s[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=e[t.toLowerCase()];if(!n){let a=s[0].charAt(0);return{type:"text",raw:a,text:a}}return Se(s,n,s[0],this.lexer,this.rules)}}emStrong(r,e,s=""){let t=this.rules.inline.emStrongLDelim.exec(r);if(!(!t||t[3]&&s.match(this.rules.other.unicodeAlphaNumeric))&&(!(t[1]||t[2])||!s||this.rules.inline.punctuation.exec(s))){let n=[...t[0]].length-1,a,i,o=n,l=0,h=t[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,e=e.slice(-1*r.length+n);(t=h.exec(e))!=null;){if(a=t[1]||t[2]||t[3]||t[4]||t[5]||t[6],!a)continue;if(i=[...a].length,t[3]||t[4]){o+=i;continue}else if((t[5]||t[6])&&n%3&&!((n+i)%3)){l+=i;continue}if(o-=i,o>0)continue;i=Math.min(i,i+o+l);let c=[...t[0]][0].length,u=r.slice(0,n+t.index+c+i);if(Math.min(n,i)%2){let g=u.slice(1,-1);return{type:"em",raw:u,text:g,tokens:this.lexer.inlineTokens(g)}}let p=u.slice(2,-2);return{type:"strong",raw:u,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(r){let e=this.rules.inline.code.exec(r);if(e){let s=e[2].replace(this.rules.other.newLineCharGlobal," "),t=this.rules.other.nonSpaceChar.test(s),n=this.rules.other.startingSpaceChar.test(s)&&this.rules.other.endingSpaceChar.test(s);return t&&n&&(s=s.substring(1,s.length-1)),{type:"codespan",raw:e[0],text:s}}}br(r){let e=this.rules.inline.br.exec(r);if(e)return{type:"br",raw:e[0]}}del(r){let e=this.rules.inline.del.exec(r);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(r){let e=this.rules.inline.autolink.exec(r);if(e){let s,t;return e[2]==="@"?(s=e[1],t="mailto:"+s):(s=e[1],t=s),{type:"link",raw:e[0],text:s,href:t,tokens:[{type:"text",raw:s,text:s}]}}}url(r){let e;if(e=this.rules.inline.url.exec(r)){let s,t;if(e[2]==="@")s=e[0],t="mailto:"+s;else{let n;do n=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(n!==e[0]);s=e[0],e[1]==="www."?t="http://"+e[0]:t=e[0]}return{type:"link",raw:e[0],text:s,href:t,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(r){let e=this.rules.inline.text.exec(r);if(e){let s=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:s}}}},T=class re{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||j,this.options.tokenizer=this.options.tokenizer||new U,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let s={other:_,block:B.normal,inline:L.normal};this.options.pedantic?(s.block=B.pedantic,s.inline=L.pedantic):this.options.gfm&&(s.block=B.gfm,this.options.breaks?s.inline=L.breaks:s.inline=L.gfm),this.tokenizer.rules=s}static get rules(){return{block:B,inline:L}}static lex(e,s){return new re(s).lex(e)}static lexInline(e,s){return new re(s).inlineTokens(e)}lex(e){e=e.replace(_.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let s=0;s<this.inlineQueue.length;s++){let t=this.inlineQueue[s];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,s=[],t=!1){for(this.options.pedantic&&(e=e.replace(_.tabCharGlobal,"    ").replace(_.spaceLine,""));e;){let n;if(this.options.extensions?.block?.some(i=>(n=i.call({lexer:this},e,s))?(e=e.substring(n.raw.length),s.push(n),!0):!1))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);let i=s.at(-1);n.raw.length===1&&i!==void 0?i.raw+=`
`:s.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);let i=s.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+n.raw,i.text+=`
`+n.text,this.inlineQueue.at(-1).src=i.text):s.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);let i=s.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+n.raw,i.text+=`
`+n.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title},s.push(n));continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),s.push(n);continue}let a=e;if(this.options.extensions?.startBlock){let i=1/0,o=e.slice(1),l;this.options.extensions.startBlock.forEach(h=>{l=h.call({lexer:this},o),typeof l=="number"&&l>=0&&(i=Math.min(i,l))}),i<1/0&&i>=0&&(a=e.substring(0,i+1))}if(this.state.top&&(n=this.tokenizer.paragraph(a))){let i=s.at(-1);t&&i?.type==="paragraph"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):s.push(n),t=a.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);let i=s.at(-1);i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):s.push(n);continue}if(e){let i="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return this.state.top=!0,s}inline(e,s=[]){return this.inlineQueue.push({src:e,tokens:s}),s}inlineTokens(e,s=[]){let t=e,n=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(t))!=null;)l.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(t=t.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+t.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(t))!=null;)t=t.slice(0,n.index)+"++"+t.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let a;for(;(n=this.tokenizer.rules.inline.blockSkip.exec(t))!=null;)a=n[2]?n[2].length:0,t=t.slice(0,n.index+a)+"["+"a".repeat(n[0].length-a-2)+"]"+t.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);t=this.options.hooks?.emStrongMask?.call({lexer:this},t)??t;let i=!1,o="";for(;e;){i||(o=""),i=!1;let l;if(this.options.extensions?.inline?.some(c=>(l=c.call({lexer:this},e,s))?(e=e.substring(l.raw.length),s.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);let c=s.at(-1);l.type==="text"&&c?.type==="text"?(c.raw+=l.raw,c.text+=l.text):s.push(l);continue}if(l=this.tokenizer.emStrong(e,t,o)){e=e.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),s.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),s.push(l);continue}let h=e;if(this.options.extensions?.startInline){let c=1/0,u=e.slice(1),p;this.options.extensions.startInline.forEach(g=>{p=g.call({lexer:this},u),typeof p=="number"&&p>=0&&(c=Math.min(c,p))}),c<1/0&&c>=0&&(h=e.substring(0,c+1))}if(l=this.tokenizer.inlineText(h)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(o=l.raw.slice(-1)),i=!0;let c=s.at(-1);c?.type==="text"?(c.raw+=l.raw,c.text+=l.text):s.push(l);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return s}},Z=class{options;parser;constructor(r){this.options=r||j}space(r){return""}code({text:r,lang:e,escaped:s}){let t=(e||"").match(_.notSpaceStart)?.[0],n=r.replace(_.endingNewline,"")+`
`;return t?'<pre><code class="language-'+$(t)+'">'+(s?n:$(n,!0))+`</code></pre>
`:"<pre><code>"+(s?n:$(n,!0))+`</code></pre>
`}blockquote({tokens:r}){return`<blockquote>
${this.parser.parse(r)}</blockquote>
`}html({text:r}){return r}def(r){return""}heading({tokens:r,depth:e}){return`<h${e}>${this.parser.parseInline(r)}</h${e}>
`}hr(r){return`<hr>
`}list(r){let e=r.ordered,s=r.start,t="";for(let i=0;i<r.items.length;i++){let o=r.items[i];t+=this.listitem(o)}let n=e?"ol":"ul",a=e&&s!==1?' start="'+s+'"':"";return"<"+n+a+`>
`+t+"</"+n+`>
`}listitem(r){return`<li>${this.parser.parse(r.tokens)}</li>
`}checkbox({checked:r}){return"<input "+(r?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:r}){return`<p>${this.parser.parseInline(r)}</p>
`}table(r){let e="",s="";for(let n=0;n<r.header.length;n++)s+=this.tablecell(r.header[n]);e+=this.tablerow({text:s});let t="";for(let n=0;n<r.rows.length;n++){let a=r.rows[n];s="";for(let i=0;i<a.length;i++)s+=this.tablecell(a[i]);t+=this.tablerow({text:s})}return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow({text:r}){return`<tr>
${r}</tr>
`}tablecell(r){let e=this.parser.parseInline(r.tokens),s=r.header?"th":"td";return(r.align?`<${s} align="${r.align}">`:`<${s}>`)+e+`</${s}>
`}strong({tokens:r}){return`<strong>${this.parser.parseInline(r)}</strong>`}em({tokens:r}){return`<em>${this.parser.parseInline(r)}</em>`}codespan({text:r}){return`<code>${$(r,!0)}</code>`}br(r){return"<br>"}del({tokens:r}){return`<del>${this.parser.parseInline(r)}</del>`}link({href:r,title:e,tokens:s}){let t=this.parser.parseInline(s),n=ye(r);if(n===null)return t;r=n;let a='<a href="'+r+'"';return e&&(a+=' title="'+$(e)+'"'),a+=">"+t+"</a>",a}image({href:r,title:e,text:s,tokens:t}){t&&(s=this.parser.parseInline(t,this.parser.textRenderer));let n=ye(r);if(n===null)return $(s);r=n;let a=`<img src="${r}" alt="${s}"`;return e&&(a+=` title="${$(e)}"`),a+=">",a}text(r){return"tokens"in r&&r.tokens?this.parser.parseInline(r.tokens):"escaped"in r&&r.escaped?r.text:$(r.text)}},de=class{strong({text:r}){return r}em({text:r}){return r}codespan({text:r}){return r}del({text:r}){return r}html({text:r}){return r}text({text:r}){return r}link({text:r}){return""+r}image({text:r}){return""+r}br(){return""}checkbox({raw:r}){return r}},P=class ne{options;renderer;textRenderer;constructor(e){this.options=e||j,this.options.renderer=this.options.renderer||new Z,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new de}static parse(e,s){return new ne(s).parse(e)}static parseInline(e,s){return new ne(s).parseInline(e)}parse(e){let s="";for(let t=0;t<e.length;t++){let n=e[t];if(this.options.extensions?.renderers?.[n.type]){let i=n,o=this.options.extensions.renderers[i.type].call({parser:this},i);if(o!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(i.type)){s+=o||"";continue}}let a=n;switch(a.type){case"space":{s+=this.renderer.space(a);break}case"hr":{s+=this.renderer.hr(a);break}case"heading":{s+=this.renderer.heading(a);break}case"code":{s+=this.renderer.code(a);break}case"table":{s+=this.renderer.table(a);break}case"blockquote":{s+=this.renderer.blockquote(a);break}case"list":{s+=this.renderer.list(a);break}case"checkbox":{s+=this.renderer.checkbox(a);break}case"html":{s+=this.renderer.html(a);break}case"def":{s+=this.renderer.def(a);break}case"paragraph":{s+=this.renderer.paragraph(a);break}case"text":{s+=this.renderer.text(a);break}default:{let i='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return s}parseInline(e,s=this.renderer){let t="";for(let n=0;n<e.length;n++){let a=e[n];if(this.options.extensions?.renderers?.[a.type]){let o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){t+=o||"";continue}}let i=a;switch(i.type){case"escape":{t+=s.text(i);break}case"html":{t+=s.html(i);break}case"link":{t+=s.link(i);break}case"image":{t+=s.image(i);break}case"checkbox":{t+=s.checkbox(i);break}case"strong":{t+=s.strong(i);break}case"em":{t+=s.em(i);break}case"codespan":{t+=s.codespan(i);break}case"br":{t+=s.br(i);break}case"del":{t+=s.del(i);break}case"text":{t+=s.text(i);break}default:{let o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return t}},O=class{options;block;constructor(r){this.options=r||j}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(r){return r}postprocess(r){return r}processAllTokens(r){return r}emStrongMask(r){return r}provideLexer(){return this.block?T.lex:T.lexInline}provideParser(){return this.block?P.parse:P.parseInline}},Wt=class{defaults=ie();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=P;Renderer=Z;TextRenderer=de;Lexer=T;Tokenizer=U;Hooks=O;constructor(...r){this.use(...r)}walkTokens(r,e){let s=[];for(let t of r)switch(s=s.concat(e.call(this,t)),t.type){case"table":{let n=t;for(let a of n.header)s=s.concat(this.walkTokens(a.tokens,e));for(let a of n.rows)for(let i of a)s=s.concat(this.walkTokens(i.tokens,e));break}case"list":{let n=t;s=s.concat(this.walkTokens(n.items,e));break}default:{let n=t;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(a=>{let i=n[a].flat(1/0);s=s.concat(this.walkTokens(i,e))}):n.tokens&&(s=s.concat(this.walkTokens(n.tokens,e)))}}return s}use(...r){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(s=>{let t={...s};if(t.async=this.defaults.async||t.async||!1,s.extensions&&(s.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let a=e.renderers[n.name];a?e.renderers[n.name]=function(...i){let o=n.renderer.apply(this,i);return o===!1&&(o=a.apply(this,i)),o}:e.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=e[n.level];a?a.unshift(n.tokenizer):e[n.level]=[n.tokenizer],n.start&&(n.level==="block"?e.startBlock?e.startBlock.push(n.start):e.startBlock=[n.start]:n.level==="inline"&&(e.startInline?e.startInline.push(n.start):e.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(e.childTokens[n.name]=n.childTokens)}),t.extensions=e),s.renderer){let n=this.defaults.renderer||new Z(this.defaults);for(let a in s.renderer){if(!(a in n))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let i=a,o=s.renderer[i],l=n[i];n[i]=(...h)=>{let c=o.apply(n,h);return c===!1&&(c=l.apply(n,h)),c||""}}t.renderer=n}if(s.tokenizer){let n=this.defaults.tokenizer||new U(this.defaults);for(let a in s.tokenizer){if(!(a in n))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let i=a,o=s.tokenizer[i],l=n[i];n[i]=(...h)=>{let c=o.apply(n,h);return c===!1&&(c=l.apply(n,h)),c}}t.tokenizer=n}if(s.hooks){let n=this.defaults.hooks||new O;for(let a in s.hooks){if(!(a in n))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;let i=a,o=s.hooks[i],l=n[i];O.passThroughHooks.has(a)?n[i]=h=>{if(this.defaults.async&&O.passThroughHooksRespectAsync.has(a))return(async()=>{let u=await o.call(n,h);return l.call(n,u)})();let c=o.call(n,h);return l.call(n,c)}:n[i]=(...h)=>{if(this.defaults.async)return(async()=>{let u=await o.apply(n,h);return u===!1&&(u=await l.apply(n,h)),u})();let c=o.apply(n,h);return c===!1&&(c=l.apply(n,h)),c}}t.hooks=n}if(s.walkTokens){let n=this.defaults.walkTokens,a=s.walkTokens;t.walkTokens=function(i){let o=[];return o.push(a.call(this,i)),n&&(o=o.concat(n.call(this,i))),o}}this.defaults={...this.defaults,...t}}),this}setOptions(r){return this.defaults={...this.defaults,...r},this}lexer(r,e){return T.lex(r,e??this.defaults)}parser(r,e){return P.parse(r,e??this.defaults)}parseMarkdown(r){return(e,s)=>{let t={...s},n={...this.defaults,...t},a=this.onError(!!n.silent,!!n.async);if(this.defaults.async===!0&&t.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(n.hooks&&(n.hooks.options=n,n.hooks.block=r),n.async)return(async()=>{let i=n.hooks?await n.hooks.preprocess(e):e,o=await(n.hooks?await n.hooks.provideLexer():r?T.lex:T.lexInline)(i,n),l=n.hooks?await n.hooks.processAllTokens(o):o;n.walkTokens&&await Promise.all(this.walkTokens(l,n.walkTokens));let h=await(n.hooks?await n.hooks.provideParser():r?P.parse:P.parseInline)(l,n);return n.hooks?await n.hooks.postprocess(h):h})().catch(a);try{n.hooks&&(e=n.hooks.preprocess(e));let i=(n.hooks?n.hooks.provideLexer():r?T.lex:T.lexInline)(e,n);n.hooks&&(i=n.hooks.processAllTokens(i)),n.walkTokens&&this.walkTokens(i,n.walkTokens);let o=(n.hooks?n.hooks.provideParser():r?P.parse:P.parseInline)(i,n);return n.hooks&&(o=n.hooks.postprocess(o)),o}catch(i){return a(i)}}}onError(r,e){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,r){let t="<p>An error occurred:</p><pre>"+$(s.message+"",!0)+"</pre>";return e?Promise.resolve(t):t}if(e)return Promise.reject(s);throw s}}},A=new Wt;function b(r,e){return A.parse(r,e)}b.options=b.setOptions=function(r){return A.setOptions(r),b.defaults=A.defaults,Pe(b.defaults),b};b.getDefaults=ie;b.defaults=j;b.use=function(...r){return A.use(...r),b.defaults=A.defaults,Pe(b.defaults),b};b.walkTokens=function(r,e){return A.walkTokens(r,e)};b.parseInline=A.parseInline;b.Parser=P;b.parser=P.parse;b.Renderer=Z;b.TextRenderer=de;b.Lexer=T;b.lexer=T.lex;b.Tokenizer=U;b.Hooks=O;b.parse=b;b.options;b.setOptions;b.use;b.walkTokens;b.parseInline;P.parse;T.lex;function Zt({contract:r,markdown:e,token:s}){const{t}=qe(),n=N.useRef(null),[a,i]=N.useState(""),[o,l]=N.useState(!1),[h,c]=N.useState(!1),{data:u,setData:p,errors:g}=Me({signer_name:r.client_name||"",signer_email:r.client_email||"",signer_company:r.client_company||"",signer_address:r.client_address||"",signature_data:"",consented:!1}),x=N.useMemo(()=>{let f=e||"";return f=f.replaceAll("[NAROČNIK]",u.signer_name||"-"),f=f.replaceAll("[EMAIL]",u.signer_email||"-"),f=f.replaceAll("[PODJETJE]",u.signer_company||"-"),f=f.replaceAll("[NASLOV]",u.signer_address||"-"),b(f)},[e,u.signer_name,u.signer_email,u.signer_company,u.signer_address]),m=()=>{n.current?.clear(),i("")},v=f=>{if(f.preventDefault(),n.current?.isEmpty()){i(t("signing.signature_error"));return}const y=n.current?.toDataURL();c(!0),Be.post(route("contracts.sign.submit",s),{signer_name:u.signer_name,signer_email:u.signer_email,signer_company:u.signer_company,signer_address:u.signer_address,signature_data:y||"",consented:u.consented},{onSuccess:()=>{l(!0)},onFinish:()=>{c(!1)}})};return o?d.jsxs("div",{className:"min-h-screen bg-plutz-dark flex items-center justify-center p-4",children:[d.jsx(ge,{title:t("signing.success_title")}),d.jsxs("div",{className:"max-w-md w-full bg-plutz-surface shadow-lg rounded-lg p-8 text-center",children:[d.jsx("div",{className:"mb-4",children:d.jsx("svg",{className:"mx-auto h-16 w-16 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),d.jsx("h1",{className:"text-2xl font-bold text-plutz-cream mb-2",children:t("signing.success_title")}),d.jsx("p",{className:"text-stone-400 mb-6",children:t("signing.success_message")}),d.jsx("p",{className:"text-sm text-stone-500",children:t("signing.close_window")})]})]}):d.jsxs("div",{className:"min-h-screen bg-plutz-dark py-12 px-4 sm:px-6 lg:px-8",children:[d.jsx(ge,{title:t("signing.title")}),d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsxs("div",{className:"bg-plutz-surface shadow-sm rounded-lg p-6 mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-plutz-cream mb-2",children:t("signing.header")}),d.jsx("p",{className:"text-stone-400",children:t("signing.description")})]}),d.jsxs("div",{className:"bg-plutz-surface shadow-lg rounded-lg overflow-hidden mb-6",children:[d.jsx("div",{className:"bg-plutz-tan/20 border-b border-plutz-tan/10 px-8 py-4",children:d.jsx("h2",{className:"text-xl font-bold text-plutz-cream",children:t("signing.document")})}),d.jsx("div",{className:"px-12 py-10 bg-white",style:{minHeight:"800px"},children:d.jsx("div",{className:"contract-content",style:{fontFamily:"Georgia, serif",fontSize:"15px",lineHeight:"1.8",color:"#1a1a1a"},dangerouslySetInnerHTML:{__html:x}})})]}),d.jsxs("div",{className:"bg-plutz-surface shadow-sm rounded-lg p-8",children:[d.jsx("h2",{className:"text-xl font-semibold text-plutz-cream mb-6",children:t("signing.your_information")}),d.jsxs("form",{onSubmit:v,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:t("signing.full_name")}),d.jsx("input",{type:"text",value:u.signer_name,onChange:f=>p("signer_name",f.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan",required:!0}),g.signer_name&&d.jsx("div",{className:"text-red-400 text-sm mt-1",children:g.signer_name})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:t("signing.email")}),d.jsx("input",{type:"email",value:u.signer_email,onChange:f=>p("signer_email",f.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan",required:!0}),g.signer_email&&d.jsx("div",{className:"text-red-400 text-sm mt-1",children:g.signer_email})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:t("signing.company")}),d.jsx("input",{type:"text",value:u.signer_company,onChange:f=>p("signer_company",f.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:t("signing.address")}),d.jsx("textarea",{value:u.signer_address,onChange:f=>p("signer_address",f.target.value),rows:3,className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:t("signing.signature")}),d.jsx("div",{className:"border-2 border-plutz-tan/20 rounded-md bg-white",children:d.jsx(H,{ref:n,canvasProps:{className:"w-full h-48 cursor-crosshair"},backgroundColor:"rgb(255, 255, 255)",onEnd:()=>i("")})}),a&&d.jsx("div",{className:"text-red-400 text-sm mt-1",children:a}),g.signature_data&&d.jsx("div",{className:"text-red-400 text-sm mt-1",children:g.signature_data}),d.jsx("button",{type:"button",onClick:m,className:"mt-2 text-sm text-stone-400 hover:text-plutz-cream",children:t("signing.clear")})]}),d.jsxs("div",{className:"flex items-start",children:[d.jsx("input",{type:"checkbox",checked:u.consented,onChange:f=>p("consented",f.target.checked),className:"mt-1 h-6 w-6 sm:h-4 sm:w-4 text-plutz-tan focus:ring-plutz-tan border-plutz-tan/20 rounded shrink-0",required:!0}),d.jsx("label",{className:"ml-2 block text-sm text-stone-400",children:t("signing.consent")})]}),g.consented&&d.jsx("div",{className:"text-red-400 text-sm",children:g.consented}),d.jsx("div",{className:"pt-4",children:d.jsx("button",{type:"submit",disabled:h,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-plutz-tan hover:bg-plutz-tan/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-plutz-tan disabled:opacity-50 disabled:cursor-not-allowed",children:t(h?"signing.submitting":"signing.submit")})})]})]}),d.jsx("div",{className:"mt-6 text-center text-sm text-stone-500",children:d.jsx("p",{children:t("signing.footer")})})]})]})}export{Zt as default};
