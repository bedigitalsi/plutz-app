import{a as R,r as m,j as e,H as Y,b as _,L as o}from"./app-C4sHziNE.js";import{A as H}from"./AuthenticatedLayout-DCqWRLfr.js";import{u as Z}from"./useTranslation-B0ntzVMZ.js";import"./transition-BXWP2Hev.js";function G({currentMonth:d,monthLabel:k,events:h,upcoming:u,calendarStart:p,calendarEnd:b,today:g}){const{t}=Z(),f=R().props.auth.user?.hide_prices,[i,j]=m.useState(null),[D,N]=m.useState([]),z=m.useMemo(()=>{const s=[],[r,l]=d.split("-").map(Number),n=new Date(p+"T00:00:00"),c=new Date(b+"T00:00:00"),a=new Date(n);for(;a<=c;){const x=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`,E=a.getDate(),L=a.getMonth()+1===l&&a.getFullYear()===r,P=x===g,A=h.filter(I=>I.date===x);s.push({date:x,day:E,isCurrentMonth:L,isToday:P,events:A}),a.setDate(a.getDate()+1)}return s},[d,p,b,h,g]),w=s=>{const[r,l]=d.split("-").map(Number),n=new Date(r,l-1+(s==="next"?1:-1),1),c=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;_.visit(route("calendar.index",{month:c}))},v=(s,r)=>new Intl.NumberFormat("de-DE",{minimumFractionDigits:0,maximumFractionDigits:0}).format(s)+" "+r,C=s=>{const r=s.some(n=>n.status==="confirmed"),l=s.some(n=>n.status==="rejected");return r?"emerald":l?"red":"amber"},M={emerald:{badge:"bg-emerald-500 shadow-lg shadow-emerald-500/30",text:"text-white"},red:{badge:"bg-red-500 shadow-lg shadow-red-500/30",text:"text-white"},amber:{badge:"bg-amber-500 shadow-lg shadow-amber-500/30",text:"text-black"}},$=(s,r)=>{j(s),N(r)},y=()=>{j(null),N([])},S=s=>new Date(s+"T00:00:00").toLocaleDateString("sl-SI",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),q=s=>s==="confirmed"?"bg-emerald-400":s==="rejected"?"bg-red-400":"bg-amber-400",T=s=>s==="confirmed"?t("calendar.confirmed"):s==="rejected"?t("calendar.rejected")||"Zavrnjeno":t("calendar.pending"),F=[t("calendar.mon"),t("calendar.tue"),t("calendar.wed"),t("calendar.thu"),t("calendar.fri"),t("calendar.sat"),t("calendar.sun")];return e.jsxs(H,{className:"bg-plutz-dark",children:[e.jsx(Y,{title:t("calendar.title")}),e.jsx("main",{className:"flex-grow w-full max-w-[1200px] mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 h-full",children:[e.jsxs("section",{className:"lg:col-span-2 flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>w("prev"),className:"p-2 rounded-lg hover:bg-plutz-surface text-stone-400 hover:text-white transition-colors group",children:e.jsx("span",{className:"material-symbols-outlined group-hover:-translate-x-0.5 transition-transform",children:"chevron_left"})}),e.jsx("h2",{className:"font-serif text-3xl font-semibold text-white tracking-wide",children:k}),e.jsx("button",{onClick:()=>w("next"),className:"p-2 rounded-lg hover:bg-plutz-surface text-stone-400 hover:text-white transition-colors group",children:e.jsx("span",{className:"material-symbols-outlined group-hover:translate-x-0.5 transition-transform",children:"chevron_right"})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"grid grid-cols-7 text-center",children:F.map(s=>e.jsx("div",{className:"text-xs font-semibold text-stone-500 uppercase tracking-widest py-2",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7 gap-2 lg:gap-3 auto-rows-fr",children:z.map(s=>e.jsxs("div",{onClick:()=>{s.isCurrentMonth&&(s.events.length>0?$(s.date,s.events):_.visit(route("inquiries.create",{date:s.date})))},className:`min-h-[80px] lg:min-h-[120px] rounded-lg p-2 lg:p-3 flex flex-col transition-colors overflow-hidden ${s.isCurrentMonth?s.isToday?"bg-plutz-surface border border-plutz-tan cursor-pointer hover:bg-[#2a2624] shadow-[0_0_15px_-3px_rgba(164,137,112,0.15)]":"bg-plutz-surface cursor-pointer hover:bg-[#2a2624] group":"bg-plutz-surface/30 text-stone-600 cursor-default"}`,children:[s.isToday?e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-sm font-bold text-plutz-tan",children:s.day}),e.jsx("span",{className:"hidden lg:inline text-[10px] uppercase font-bold text-plutz-tan tracking-wide",children:t("calendar.today")})]}):e.jsx("span",{className:`text-sm font-medium ${s.isCurrentMonth?"text-plutz-cream group-hover:text-plutz-tan transition-colors":""}`,children:s.day}),s.events.length>0&&(()=>{const r=C(s.events),l=M[r];return e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("div",{className:`w-9 h-9 lg:w-11 lg:h-11 rounded-lg flex items-center justify-center ${l.badge}`,children:e.jsx("span",{className:`text-base lg:text-lg font-bold ${l.text}`,children:s.events.length})})})})()]},s.date))})]})]}),e.jsx("aside",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-plutz-surface rounded-xl p-6 h-full border border-[#2d2a28] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"font-serif text-xl font-semibold text-white",children:t("calendar.upcoming_events")}),e.jsx(o,{href:route("inquiries.index"),className:"text-xs text-plutz-tan font-medium hover:text-white transition-colors uppercase tracking-wider",children:t("calendar.view_all")})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-4",children:[u.map(s=>e.jsxs(o,{href:route("inquiries.show",s.id),className:`group flex flex-col p-4 rounded-lg transition-all cursor-pointer ${s.status==="confirmed"?"border-2 border-emerald-500/60 bg-emerald-500/5 hover:border-emerald-400 hover:bg-emerald-500/10":s.status==="rejected"?"border-2 border-red-500/60 bg-red-500/5 hover:border-red-400 hover:bg-red-500/10":"border-2 border-amber-500/60 bg-amber-500/5 hover:border-amber-400 hover:bg-amber-500/10"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-bold text-plutz-cream",children:s.day_label}),e.jsx("span",{className:"text-sm text-stone-400 font-medium",children:s.day_name})]}),s.status==="confirmed"?e.jsx("span",{className:"px-2.5 py-1 rounded bg-emerald-500 text-white text-[11px] font-bold uppercase tracking-wide shadow-lg shadow-emerald-500/25",children:t("calendar.confirmed")}):s.status==="rejected"?e.jsx("span",{className:"px-2.5 py-1 rounded bg-red-500 text-white text-[11px] font-bold uppercase tracking-wide shadow-lg shadow-red-500/25",children:t("calendar.rejected")||"ZAVRNJENO"}):e.jsx("span",{className:"px-2.5 py-1 rounded bg-amber-500 text-black text-[11px] font-bold uppercase tracking-wide shadow-lg shadow-amber-500/25",children:t("calendar.pending")})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("h4",{className:"text-base font-medium text-white group-hover:text-plutz-tan transition-colors",children:s.title}),s.location_address&&e.jsx("p",{className:"text-sm text-stone-400",children:s.location_address})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 pt-3 border-t border-[#3a3633]",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-stone-400 text-xs",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"schedule"}),e.jsx("span",{children:s.time||t("calendar.tbd")})]}),!f&&s.status==="confirmed"&&s.price?e.jsxs("div",{className:"flex items-center gap-1.5 text-stone-400 text-xs",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"payments"}),e.jsx("span",{children:v(s.price,s.currency)})]}):s.status==="pending"?e.jsxs("div",{className:"flex items-center gap-1.5 text-stone-400 text-xs",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"mail"}),e.jsx("span",{children:t("calendar.awaiting_reply")})]}):null]})]},s.id)),u.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("span",{className:"material-symbols-outlined text-stone-600 text-4xl block mb-2",children:"event_busy"}),e.jsx("p",{className:"text-stone-500 text-sm",children:t("calendar.no_upcoming_events")})]}),e.jsx("div",{className:"pt-4",children:e.jsxs(o,{href:route("inquiries.create"),className:"w-full py-3 rounded border border-dashed border-stone-600 text-stone-400 hover:text-white hover:border-stone-400 hover:bg-[#252220] transition-all text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"add"}),t("calendar.add_event_request")]})})]})]})})]})}),i&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:y,children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),e.jsxs("div",{className:"relative bg-plutz-surface rounded-xl border border-[#2d2a28] shadow-2xl w-full max-w-lg max-h-[80vh] overflow-hidden flex flex-col",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-[#2d2a28]",children:[e.jsx("h3",{className:"font-serif text-xl font-semibold text-white capitalize",children:S(i)}),e.jsx("button",{onClick:y,className:"text-stone-400 hover:text-white transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5 space-y-3",children:D.map(s=>e.jsxs(o,{href:route("inquiries.show",s.id),className:`flex items-start gap-3 p-4 rounded-lg border transition-all hover:scale-[1.01] ${s.status==="confirmed"?"border-emerald-500/40 bg-emerald-500/5 hover:bg-emerald-500/10":s.status==="rejected"?"border-red-500/40 bg-red-500/5 hover:bg-red-500/10":"border-amber-500/40 bg-amber-500/5 hover:bg-amber-500/10"}`,children:[e.jsx("div",{className:`w-3 h-3 rounded-full mt-1 flex-shrink-0 ${q(s.status)}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("h4",{className:"text-base font-semibold text-white truncate",children:s.title}),e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wide flex-shrink-0 px-2 py-0.5 rounded ${s.status==="confirmed"?"bg-emerald-500/20 text-emerald-300":s.status==="rejected"?"bg-red-500/20 text-red-300":"bg-amber-500/20 text-amber-300"}`,children:T(s.status)})]}),e.jsxs("div",{className:"mt-1 space-y-0.5",children:[s.contact_person&&e.jsxs("p",{className:"text-sm text-stone-400 flex items-center gap-1.5",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"person"}),s.contact_person]}),s.location_address&&e.jsxs("p",{className:"text-sm text-stone-400 flex items-center gap-1.5",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"location_on"}),s.location_address]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[s.time&&e.jsxs("span",{className:"text-xs text-stone-500 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"schedule"}),s.time]}),!f&&s.price!=null&&e.jsxs("span",{className:"text-xs text-stone-500 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"payments"}),v(s.price,s.currency)]})]})]})]},s.id))}),e.jsx("div",{className:"p-5 border-t border-[#2d2a28]",children:e.jsxs(o,{href:route("inquiries.create",{date:i}),className:"w-full py-3 rounded-lg border border-dashed border-stone-600 text-stone-400 hover:text-white hover:border-stone-400 hover:bg-[#252220] transition-all text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"add"}),t("calendar.add_event_request")]})})]})]})]})}export{G as default};
