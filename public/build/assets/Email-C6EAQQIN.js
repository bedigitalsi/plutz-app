import{r as o,u as _,j as e,H as f}from"./app-HlzfsMCi.js";import{A as b}from"./AuthenticatedLayout-BFCyOzdz.js";import"./transition-JSdg_jrA.js";function v({settings:l}){const[m,u]=o.useState(""),[r,i]=o.useState(!1),{data:s,setData:a,post:x,processing:d,errors:n}=_({mail_from_address:l.mail_from_address,mail_from_name:l.mail_from_name,mail_force_from:l.mail_force_from,mail_force_from_name:l.mail_force_from_name,mail_set_return_path:l.mail_set_return_path,mail_host:l.mail_host,mail_port:l.mail_port,mail_encryption:l.mail_encryption,mail_auto_tls:l.mail_auto_tls,mail_auth_enabled:l.mail_auth_enabled,mail_username:l.mail_username,mail_password:"",mail_admin_recipient:l.mail_admin_recipient}),p=t=>{t.preventDefault(),x(route("settings.email.update"))},h=t=>{t.preventDefault(),m&&(i(!0),window.axios.post(route("settings.email.test"),{test_email:m}).then(()=>{alert("Test email sent successfully!")}).catch(c=>{alert("Failed to send test email: "+(c.response?.data?.message||c.message))}).finally(()=>{i(!1)}))};return e.jsxs(b,{className:"bg-plutz-dark",children:[e.jsx(f,{title:"Email Settings"}),e.jsx("div",{className:"max-w-[1200px] mx-auto w-full p-6 pb-0",children:e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("h2",{className:"text-2xl font-serif text-plutz-cream",children:"Email Settings"})})}),e.jsx("div",{className:"max-w-[1200px] mx-auto w-full p-6",children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:"bg-plutz-surface overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-plutz-cream mb-4",children:"Sender Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:"From Email"}),e.jsx("input",{type:"email",value:s.mail_from_address,onChange:t=>a("mail_from_address",t.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"}),n.mail_from_address&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:n.mail_from_address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:"From Name"}),e.jsx("input",{type:"text",value:s.mail_from_name,onChange:t=>a("mail_from_name",t.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"}),n.mail_from_name&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:n.mail_from_name})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.mail_force_from,onChange:t=>a("mail_force_from",t.target.checked),className:"rounded border-plutz-tan/20 text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400",children:"Force From Email (Recommended Settings: Enable)"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.mail_force_from_name,onChange:t=>a("mail_force_from_name",t.target.checked),className:"rounded border-plutz-tan/20 text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400",children:"Force Sender Name"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.mail_set_return_path,onChange:t=>a("mail_set_return_path",t.target.checked),className:"rounded border-plutz-tan/20 text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400",children:"Set the return-path to match the From Email"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:"Admin Recipient Email"}),e.jsx("input",{type:"email",value:s.mail_admin_recipient,onChange:t=>a("mail_admin_recipient",t.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"}),e.jsx("p",{className:"text-sm text-stone-500 mt-1",children:"Email address to receive admin notifications (e.g., signed contracts)"}),n.mail_admin_recipient&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:n.mail_admin_recipient})]})]}),e.jsxs("div",{className:"bg-plutz-surface overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-plutz-cream mb-4",children:"SMTP Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:"SMTP Host"}),e.jsx("input",{type:"text",value:s.mail_host,onChange:t=>a("mail_host",t.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"}),n.mail_host&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:n.mail_host})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:"SMTP Port"}),e.jsx("input",{type:"number",value:s.mail_port,onChange:t=>a("mail_port",parseInt(t.target.value)),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"}),n.mail_port&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:n.mail_port}),e.jsx("p",{className:"text-sm text-stone-500 mt-1",children:"SSL usually uses port 465, TLS usually uses 587 or 25"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:"Encryption"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"none",checked:s.mail_encryption==="none",onChange:t=>a("mail_encryption",t.target.value),className:"text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400",children:"None"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"ssl",checked:s.mail_encryption==="ssl",onChange:t=>a("mail_encryption",t.target.value),className:"text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400",children:"SSL"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"tls",checked:s.mail_encryption==="tls",onChange:t=>a("mail_encryption",t.target.value),className:"text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400",children:"TLS"})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.mail_auto_tls,onChange:t=>a("mail_auto_tls",t.target.checked),className:"rounded border-plutz-tan/20 text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400",children:"Use Auto TLS (By default, the TLS encryption would be used if the server supports it. On some servers, it could be a problem and may need to be disabled.)"})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("label",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",checked:s.mail_auth_enabled,onChange:t=>a("mail_auth_enabled",t.target.checked),className:"rounded border-plutz-tan/20 text-plutz-tan focus:ring-plutz-tan"}),e.jsx("span",{className:"ml-2 text-sm text-stone-400 font-medium",children:"Authentication (If you need to provide your SMTP server's credentials (username and password) enable the authentication, in most cases this is required.)"})]}),s.mail_auth_enabled&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 ml-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:"SMTP Username"}),e.jsx("input",{type:"text",value:s.mail_username,onChange:t=>a("mail_username",t.target.value),className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"}),n.mail_username&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:n.mail_username})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-400 mb-2",children:"SMTP Password"}),e.jsx("input",{type:"password",value:s.mail_password,onChange:t=>a("mail_password",t.target.value),placeholder:l.has_password?"••••••••••":"Enter password",className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"}),e.jsx("p",{className:"text-sm text-stone-500 mt-1",children:l.has_password?"Leave blank to keep existing password":"This input will be securely encrypted using WP SALTS as encryption keys before saving"}),n.mail_password&&e.jsx("div",{className:"text-red-400 text-sm mt-1",children:n.mail_password})]})]})]})]}),e.jsxs("div",{className:"bg-plutz-surface overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-plutz-cream mb-4",children:"Send Test Email"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"email",value:m,onChange:t=>u(t.target.value),placeholder:"Enter email address to send test",className:"w-full rounded-md border-plutz-tan/20 shadow-sm focus:border-plutz-tan focus:ring-plutz-tan"})}),e.jsx("button",{type:"button",onClick:h,disabled:r||!m,className:"px-4 py-2 bg-stone-700 text-white rounded-md hover:bg-stone-700 disabled:opacity-50",children:r?"Sending...":"Send Test"})]}),e.jsx("p",{className:"text-sm text-stone-500 mt-2",children:"Send a test email to verify your SMTP settings are working correctly."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-2 bg-plutz-tan text-plutz-dark rounded-md hover:bg-plutz-tan/90 disabled:opacity-50",children:d?"Saving...":"Save Settings"})})]})})]})}export{v as default};
